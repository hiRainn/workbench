{"remainingRequest":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/gopath/vue-antd-admin/src/layouts/AdminLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/MAMP/gopath/vue-antd-admin/src/layouts/AdminLayout.vue","mtime":1598927029005},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBZG1pbkhlYWRlciBmcm9tICcuL2hlYWRlci9BZG1pbkhlYWRlcicKaW1wb3J0IFBhZ2VGb290ZXIgZnJvbSAnLi9mb290ZXIvUGFnZUZvb3RlcicKaW1wb3J0IERyYXdlciBmcm9tICcuLi9jb21wb25lbnRzL3Rvb2wvRHJhd2VyJwppbXBvcnQgU2lkZU1lbnUgZnJvbSAnLi4vY29tcG9uZW50cy9tZW51L1NpZGVNZW51JwppbXBvcnQgU2V0dGluZyBmcm9tICcuLi9jb21wb25lbnRzL3NldHRpbmcvU2V0dGluZycKaW1wb3J0IHttYXBTdGF0ZSwgbWFwTXV0YXRpb25zLCBtYXBHZXR0ZXJzfSBmcm9tICd2dWV4JwoKY29uc3QgbWluSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gNjQgLSAyNCAtIDEyMgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBZG1pbkxheW91dCcsCiAgY29tcG9uZW50czoge1NldHRpbmcsIFNpZGVNZW51LCBEcmF3ZXIsIFBhZ2VGb290ZXIsIEFkbWluSGVhZGVyfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIG1pbkhlaWdodDogbWluSGVpZ2h0LAogICAgICBjb2xsYXBzZWQ6IGZhbHNlLAogICAgICBzaG93U2V0dGluZzogZmFsc2UKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAkcm91dGUodmFsKSB7CiAgICAgIHRoaXMuc2V0QWN0aXZhdGVkKHZhbCkKICAgIH0sCiAgICBsYXlvdXQoKSB7CiAgICAgIHRoaXMuc2V0QWN0aXZhdGVkKHRoaXMuJHJvdXRlKQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdzZXR0aW5nJywgWydpc01vYmlsZScsICd0aGVtZScsICdsYXlvdXQnLCAnZm9vdGVyTGlua3MnLCAnY29weXJpZ2h0JywgJ2ZpeGVkSGVhZGVyJywgJ2ZpeGVkU2lkZUJhcicsCiAgICAgICdoaWRlU2V0dGluZyddKSwKICAgIC4uLm1hcEdldHRlcnMoJ3NldHRpbmcnLCBbJ2ZpcnN0TWVudScsICdzdWJNZW51JywgJ21lbnVEYXRhJ10pLAogICAgc2lkZU1lbnVXaWR0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkID8gJzgwcHgnIDogJzI1NnB4JwogICAgfSwKICAgIGhlYWRlclN0eWxlKCkgewogICAgICBsZXQgd2lkdGggPSAodGhpcy5maXhlZEhlYWRlciAmJiB0aGlzLmxheW91dCAhPT0gJ2hlYWQnICYmICF0aGlzLmlzTW9iaWxlKSA/IGBjYWxjKDEwMCUgLSAke3RoaXMuc2lkZU1lbnVXaWR0aH0pYCA6ICcxMDAlJwogICAgICBsZXQgcG9zaXRpb24gPSB0aGlzLmZpeGVkSGVhZGVyID8gJ2ZpeGVkJyA6ICdzdGF0aWMnCiAgICAgIGxldCB0cmFuc2l0aW9uID0gdGhpcy5maXhlZEhlYWRlciA/ICd0cmFuc2l0aW9uOiB3aWR0aCAwLjJzJyA6ICcnCiAgICAgIHJldHVybiBgd2lkdGg6ICR7d2lkdGh9OyBwb3NpdGlvbjogJHtwb3NpdGlvbn07ICR7dHJhbnNpdGlvbn1gCiAgICB9LAogICAgaGVhZE1lbnVEYXRhKCkgewogICAgICBjb25zdCB7bGF5b3V0LCBtZW51RGF0YSwgZmlyc3RNZW51fSA9IHRoaXMKICAgICAgcmV0dXJuIGxheW91dCA9PT0gJ21peCcgPyBmaXJzdE1lbnUgOiBtZW51RGF0YQogICAgfSwKICAgIHNpZGVNZW51RGF0YSgpIHsKICAgICAgY29uc3Qge2xheW91dCwgbWVudURhdGEsIHN1Yk1lbnV9ID0gdGhpcwogICAgICByZXR1cm4gbGF5b3V0ID09PSAnbWl4JyA/IHN1Yk1lbnUgOiBtZW51RGF0YQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKCdzZXR0aW5nJywgWydjb3JyZWN0UGFnZU1pbkhlaWdodCcsICdzZXRBY3RpdmF0ZWRGaXJzdCddKSwKICAgIHRvZ2dsZUNvbGxhcHNlICgpIHsKICAgICAgdGhpcy5jb2xsYXBzZWQgPSAhdGhpcy5jb2xsYXBzZWQKICAgIH0sCiAgICBvbk1lbnVTZWxlY3QgKCkgewogICAgICB0aGlzLnRvZ2dsZUNvbGxhcHNlKCkKICAgIH0sCiAgICBzZXRBY3RpdmF0ZWQocm91dGUpIHsKICAgICAgaWYgKHRoaXMubGF5b3V0ID09PSAnbWl4JykgewogICAgICAgIGxldCBtYXRjaGVkID0gcm91dGUubWF0Y2hlZAogICAgICAgIG1hdGNoZWQgPSBtYXRjaGVkLnNsaWNlKDAsIG1hdGNoZWQubGVuZ3RoIC0gMSkKICAgICAgICBjb25zdCB7Zmlyc3RNZW51fSA9IHRoaXMKICAgICAgICBmb3IgKGxldCBtZW51IG9mIGZpcnN0TWVudSkgewogICAgICAgICAgaWYgKG1hdGNoZWQuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5wYXRoID09PSBtZW51LmZ1bGxQYXRoKSAhPT0gLTEpIHsKICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmF0ZWRGaXJzdChtZW51LmZ1bGxQYXRoKQogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQobWluSGVpZ2h0IC0gMSkKICAgIHRoaXMuc2V0QWN0aXZhdGVkKHRoaXMuJHJvdXRlKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQoLW1pbkhlaWdodCArIDEpCiAgfQp9Cg=="},{"version":3,"sources":["AdminLayout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminLayout.vue","sourceRoot":"src/layouts","sourcesContent":["<template>\n  <a-layout :class=\"['admin-layout', 'beauty-scroll']\">\n    <drawer v-if=\"isMobile\" v-model=\"collapsed\">\n      <side-menu :theme=\"theme.mode\" :menuData=\"menuData\" :collapsed=\"false\" :collapsible=\"false\" @menuSelect=\"onMenuSelect\"/>\n    </drawer>\n    <side-menu :class=\"[fixedSideBar ? 'fixed-side' : '']\" :theme=\"theme.mode\" v-else-if=\"layout === 'side' || layout === 'mix'\" :menuData=\"sideMenuData\" :collapsed=\"collapsed\" :collapsible=\"true\" />\n    <div v-if=\"fixedSideBar && !isMobile\" :style=\"`width: ${sideMenuWidth}; min-width: ${sideMenuWidth};max-width: ${sideMenuWidth};`\" class=\"virtual-side\"></div>\n    <drawer v-if=\"!hideSetting\" v-model=\"showSetting\" placement=\"right\">\n      <div class=\"setting\" slot=\"handler\">\n        <a-icon :type=\"showSetting ? 'close' : 'setting'\"/>\n      </div>\n      <setting />\n    </drawer>\n    <a-layout class=\"admin-layout-main beauty-scroll\">\n      <admin-header :style=\"headerStyle\" :menuData=\"headMenuData\" :collapsed=\"collapsed\" @toggleCollapse=\"toggleCollapse\"/>\n      <a-layout-header v-if=\"fixedHeader\"></a-layout-header>\n      <a-layout-content class=\"admin-layout-content\">\n        <div :style=\"`min-height: ${minHeight}px; position: relative`\">\n          <slot></slot>\n        </div>\n      </a-layout-content>\n      <a-layout-footer style=\"padding: 0px\">\n        <page-footer :link-list=\"footerLinks\" :copyright=\"copyright\" />\n      </a-layout-footer>\n    </a-layout>\n  </a-layout>\n</template>\n\n<script>\nimport AdminHeader from './header/AdminHeader'\nimport PageFooter from './footer/PageFooter'\nimport Drawer from '../components/tool/Drawer'\nimport SideMenu from '../components/menu/SideMenu'\nimport Setting from '../components/setting/Setting'\nimport {mapState, mapMutations, mapGetters} from 'vuex'\n\nconst minHeight = window.innerHeight - 64 - 24 - 122\n\nexport default {\n  name: 'AdminLayout',\n  components: {Setting, SideMenu, Drawer, PageFooter, AdminHeader},\n  data () {\n    return {\n      minHeight: minHeight,\n      collapsed: false,\n      showSetting: false\n    }\n  },\n  watch: {\n    $route(val) {\n      this.setActivated(val)\n    },\n    layout() {\n      this.setActivated(this.$route)\n    }\n  },\n  computed: {\n    ...mapState('setting', ['isMobile', 'theme', 'layout', 'footerLinks', 'copyright', 'fixedHeader', 'fixedSideBar',\n      'hideSetting']),\n    ...mapGetters('setting', ['firstMenu', 'subMenu', 'menuData']),\n    sideMenuWidth() {\n      return this.collapsed ? '80px' : '256px'\n    },\n    headerStyle() {\n      let width = (this.fixedHeader && this.layout !== 'head' && !this.isMobile) ? `calc(100% - ${this.sideMenuWidth})` : '100%'\n      let position = this.fixedHeader ? 'fixed' : 'static'\n      let transition = this.fixedHeader ? 'transition: width 0.2s' : ''\n      return `width: ${width}; position: ${position}; ${transition}`\n    },\n    headMenuData() {\n      const {layout, menuData, firstMenu} = this\n      return layout === 'mix' ? firstMenu : menuData\n    },\n    sideMenuData() {\n      const {layout, menuData, subMenu} = this\n      return layout === 'mix' ? subMenu : menuData\n    }\n  },\n  methods: {\n    ...mapMutations('setting', ['correctPageMinHeight', 'setActivatedFirst']),\n    toggleCollapse () {\n      this.collapsed = !this.collapsed\n    },\n    onMenuSelect () {\n      this.toggleCollapse()\n    },\n    setActivated(route) {\n      if (this.layout === 'mix') {\n        let matched = route.matched\n        matched = matched.slice(0, matched.length - 1)\n        const {firstMenu} = this\n        for (let menu of firstMenu) {\n          if (matched.findIndex(item => item.path === menu.fullPath) !== -1) {\n            this.setActivatedFirst(menu.fullPath)\n            break\n          }\n        }\n      }\n    }\n  },\n  created() {\n    this.correctPageMinHeight(minHeight - 1)\n    this.setActivated(this.$route)\n  },\n  beforeDestroy() {\n    this.correctPageMinHeight(-minHeight + 1)\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .admin-layout{\n    .side-menu{\n      &.fixed-side{\n        position: fixed;\n        height: 100vh;\n        left: 0;\n        top: 0;\n      }\n    }\n    .virtual-side{\n      transition: all 0.2s;\n    }\n    .admin-layout-main{\n      .admin-header{\n        top: 0;\n        right: 0;\n      }\n    }\n    .admin-layout-content{\n      padding: 24px 24px 0;\n      min-height: auto;\n    }\n    .setting{\n      background-color: @primary-color;\n      color: @base-bg-color;\n      border-radius: 5px 0 0 5px;\n      line-height: 40px;\n      font-size: 22px;\n      width: 40px;\n      height: 40px;\n      box-shadow: -2px 0 8px @shadow-color;\n    }\n  }\n</style>\n"]}]}