{"remainingRequest":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/gopath/workbench/workbeach/src/components/checkbox/ImgCheckbox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/MAMP/gopath/workbench/workbeach/src/components/checkbox/ImgCheckbox.vue","mtime":1598927028993},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IEdyb3VwID0gewogIG5hbWU6ICdJbWdDaGVja2JveEdyb3VwJywKICBwcm9wczogewogICAgbXVsdGlwbGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGRlZmF1bHRWYWx1ZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsdWVzOiBbXSwKICAgICAgb3B0aW9uczogW10KICAgIH0KICB9LAogIHByb3ZpZGUgKCkgewogICAgcmV0dXJuIHsKICAgICAgZ3JvdXBDb250ZXh0OiB0aGlzCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgJ3ZhbHVlcyc6IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB2YWx1ZSkKICAgICAgLy8gLy8g5q2k5p2h5Lu25piv5Li66Kej5Yaz5Y2V6YCJ5pe277yM6Kem5Y+R5Lik5qyhY2hhbmfkuovku7bpl67popgKICAgICAgLy8gaWYgKCEobmV3VmFsLmxlbmd0aCA9PT0gMSAmJiBvbGRWYWwubGVuZ3RoID09PSAxICYmIG5ld1ZhbFswXSA9PT0gb2xkVmFsWzBdKSkgewogICAgICAvLyAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHRoaXMudmFsdWVzKQogICAgICAvLyB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaGFuZ2UgKG9wdGlvbikgewogICAgICBpZiAoIW9wdGlvbi5jaGVja2VkKSB7CiAgICAgICAgaWYgKHRoaXMudmFsdWVzLmluZGV4T2Yob3B0aW9uLnZhbHVlKSA+IC0xKSB7CiAgICAgICAgICB0aGlzLnZhbHVlcyA9IHRoaXMudmFsdWVzLmZpbHRlcihpdGVtID0+IGl0ZW0gIT0gb3B0aW9uLnZhbHVlKQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHsKICAgICAgICAgIHRoaXMudmFsdWVzID0gW29wdGlvbi52YWx1ZV0KICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSAhPSBvcHRpb24udmFsdWUpIHsKICAgICAgICAgICAgICBpdGVtLnNDaGVja2VkID0gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy52YWx1ZXMucHVzaChvcHRpb24udmFsdWUpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICByZW5kZXIgKGgpIHsKICAgIHJldHVybiBoKAogICAgICAnZGl2JywKICAgICAgewogICAgICAgIGF0dHJzOiB7c3R5bGU6ICdkaXNwbGF5OiBmbGV4J30KICAgICAgfSwKICAgICAgW3RoaXMuJHNsb3RzLmRlZmF1bHRdCiAgICApCiAgfQp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0ltZ0NoZWNrYm94JywKICBHcm91cCwKICBwcm9wczogewogICAgY2hlY2tlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgaW1nOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB2YWx1ZTogewogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHRpdGxlOiBTdHJpbmcKICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgc0NoZWNrZWQ6IHRoaXMuaW5pdENoZWNrZWQoKQogICAgfQogIH0sCiAgaW5qZWN0OiBbJ2dyb3VwQ29udGV4dCddLAogIHdhdGNoOiB7CiAgICAnc0NoZWNrZWQnOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IG9wdGlvbiA9IHsKICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZSwKICAgICAgICBjaGVja2VkOiB0aGlzLnNDaGVja2VkCiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgb3B0aW9uKQogICAgICBjb25zdCBncm91cENvbnRleHQgPSB0aGlzLmdyb3VwQ29udGV4dAogICAgICBpZiAoZ3JvdXBDb250ZXh0KSB7CiAgICAgICAgZ3JvdXBDb250ZXh0LmhhbmRsZUNoYW5nZShvcHRpb24pCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgY29uc3QgZ3JvdXBDb250ZXh0ID0gdGhpcy5ncm91cENvbnRleHQKICAgIGlmIChncm91cENvbnRleHQpIHsKICAgICAgdGhpcy5zQ2hlY2tlZCA9IGdyb3VwQ29udGV4dC5kZWZhdWx0VmFsdWVzLmxlbmd0aCA+IDAgPyBncm91cENvbnRleHQuZGVmYXVsdFZhbHVlcy5pbmRleE9mKHRoaXMudmFsdWUpID49IDAgOiB0aGlzLnNDaGVja2VkCiAgICAgIGdyb3VwQ29udGV4dC5vcHRpb25zLnB1c2godGhpcykKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZSAoKSB7CiAgICAgIGlmICh0aGlzLmdyb3VwQ29udGV4dC5tdWx0aXBsZSB8fCAhdGhpcy5zQ2hlY2tlZCkgewogICAgICAgIHRoaXMuc0NoZWNrZWQgPSAhdGhpcy5zQ2hlY2tlZAogICAgICB9CiAgICB9LAogICAgaW5pdENoZWNrZWQoKSB7CiAgICAgIGxldCBncm91cENvbnRleHQgPSB0aGlzLmdyb3VwQ29udGV4dAogICAgICBpZiAoIWdyb3VwQ29udGV4dCkgewogICAgICAgIHJldHVybiB0aGlzLmNoZWNrZWQKICAgICAgfWVsc2UgaWYgKGdyb3VwQ29udGV4dC5tdWx0aXBsZSkgewogICAgICAgIHJldHVybiBncm91cENvbnRleHQuZGVmYXVsdFZhbHVlcy5pbmRleE9mKHRoaXMudmFsdWUpID4gLTEKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZ3JvdXBDb250ZXh0LmRlZmF1bHRWYWx1ZXNbMF0gPT0gdGhpcy52YWx1ZQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["ImgCheckbox.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImgCheckbox.vue","sourceRoot":"src/components/checkbox","sourcesContent":["<template>\n  <a-tooltip :title=\"title\" :overlayStyle=\"{zIndex: 2001}\">\n    <div class=\"img-check-box\" @click=\"toggle\">\n      <img :src=\"img\" />\n      <div v-if=\"sChecked\" class=\"check-item\">\n        <a-icon type=\"check\" />\n      </div>\n    </div>\n  </a-tooltip>\n</template>\n\n<script>\nconst Group = {\n  name: 'ImgCheckboxGroup',\n  props: {\n    multiple: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    defaultValues: {\n      type: Array,\n      required: false,\n      default: () => []\n    }\n  },\n  data () {\n    return {\n      values: [],\n      options: []\n    }\n  },\n  provide () {\n    return {\n      groupContext: this\n    }\n  },\n  watch: {\n    'values': function (value) {\n      this.$emit('change', value)\n      // // 此条件是为解决单选时，触发两次chang事件问题\n      // if (!(newVal.length === 1 && oldVal.length === 1 && newVal[0] === oldVal[0])) {\n      //   this.$emit('change', this.values)\n      // }\n    }\n  },\n  methods: {\n    handleChange (option) {\n      if (!option.checked) {\n        if (this.values.indexOf(option.value) > -1) {\n          this.values = this.values.filter(item => item != option.value)\n        }\n      } else {\n        if (!this.multiple) {\n          this.values = [option.value]\n          this.options.forEach(item => {\n            if (item.value != option.value) {\n              item.sChecked = false\n            }\n          })\n        } else {\n          this.values.push(option.value)\n        }\n      }\n    }\n  },\n  render (h) {\n    return h(\n      'div',\n      {\n        attrs: {style: 'display: flex'}\n      },\n      [this.$slots.default]\n    )\n  }\n}\n\nexport default {\n  name: 'ImgCheckbox',\n  Group,\n  props: {\n    checked: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    img: {\n      type: String,\n      required: true\n    },\n    value: {\n      required: true\n    },\n    title: String\n  },\n  data () {\n    return {\n      sChecked: this.initChecked()\n    }\n  },\n  inject: ['groupContext'],\n  watch: {\n    'sChecked': function () {\n      const option = {\n        value: this.value,\n        checked: this.sChecked\n      }\n      this.$emit('change', option)\n      const groupContext = this.groupContext\n      if (groupContext) {\n        groupContext.handleChange(option)\n      }\n    }\n  },\n  created () {\n    const groupContext = this.groupContext\n    if (groupContext) {\n      this.sChecked = groupContext.defaultValues.length > 0 ? groupContext.defaultValues.indexOf(this.value) >= 0 : this.sChecked\n      groupContext.options.push(this)\n    }\n  },\n  methods: {\n    toggle () {\n      if (this.groupContext.multiple || !this.sChecked) {\n        this.sChecked = !this.sChecked\n      }\n    },\n    initChecked() {\n      let groupContext = this.groupContext\n      if (!groupContext) {\n        return this.checked\n      }else if (groupContext.multiple) {\n        return groupContext.defaultValues.indexOf(this.value) > -1\n      } else {\n        return groupContext.defaultValues[0] == this.value\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .img-check-box{\n    margin-right: 16px;\n    position: relative;\n    border-radius: 4px;\n    cursor: pointer;\n    .check-item{\n      position: absolute;\n      top: 0;\n      right: 0;\n      width: 100%;\n      padding-top: 15px;\n      padding-left: 24px;\n      height: 100%;\n      color: @primary-color;\n      font-size: 14px;\n      font-weight: bold;\n    }\n  }\n</style>\n"]}]}