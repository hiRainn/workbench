{"remainingRequest":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/gopath/vue-antd-admin/src/layouts/tabs/TabsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/MAMP/gopath/vue-antd-admin/src/layouts/tabs/TabsView.vue","mtime":1598927029008},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBZG1pbkxheW91dCBmcm9tICdAL2xheW91dHMvQWRtaW5MYXlvdXQnCmltcG9ydCBDb250ZXh0bWVudSBmcm9tICdAL2NvbXBvbmVudHMvbWVudS9Db250ZXh0bWVudScKaW1wb3J0IFBhZ2VUb2dnbGVUcmFuc2l0aW9uIGZyb20gJ0AvY29tcG9uZW50cy90cmFuc2l0aW9uL1BhZ2VUb2dnbGVUcmFuc2l0aW9uJwppbXBvcnQge21hcFN0YXRlLCBtYXBNdXRhdGlvbnN9IGZyb20gJ3Z1ZXgnCmltcG9ydCB7Z2V0STE4bktleX0gZnJvbSAnQC91dGlscy9yb3V0ZXJVdGlsJwppbXBvcnQgQUtlZXBBbGl2ZSBmcm9tICdAL2NvbXBvbmVudHMvY2FjaGUvQUtlZXBBbGl2ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVGFic1ZpZXcnLAogIGkxOG46IHJlcXVpcmUoJy4vaTE4bicpLAogIGNvbXBvbmVudHM6IHsgUGFnZVRvZ2dsZVRyYW5zaXRpb24sIENvbnRleHRtZW51LCBBZG1pbkxheW91dCAsIEFLZWVwQWxpdmUgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGNsZWFyQ2FjaGVzOiBbXSwKICAgICAgcGFnZUxpc3Q6IFtdLAogICAgICBjYWNoZWRLZXlzOiBbXSwKICAgICAgYWN0aXZlUGFnZTogJycsCiAgICAgIG1lbnVWaXNpYmxlOiBmYWxzZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdzZXR0aW5nJywgWydtdWx0aVBhZ2UnLCAnYW5pbWF0ZScsICdsYXlvdXQnXSksCiAgICBtZW51SXRlbUxpc3QoKSB7CiAgICAgIHJldHVybiBbCiAgICAgICAgeyBrZXk6ICcxJywgaWNvbjogJ3ZlcnRpY2FsLXJpZ2h0JywgdGV4dDogdGhpcy4kdCgnY2xvc2VMZWZ0JykgfSwKICAgICAgICB7IGtleTogJzInLCBpY29uOiAndmVydGljYWwtbGVmdCcsIHRleHQ6IHRoaXMuJHQoJ2Nsb3NlUmlnaHQnKSB9LAogICAgICAgIHsga2V5OiAnMycsIGljb246ICdjbG9zZScsIHRleHQ6IHRoaXMuJHQoJ2Nsb3NlT3RoZXJzJykgfQogICAgICBdCiAgICB9LAogICAgdGFic09mZnNldCgpIHsKICAgICAgcmV0dXJuIHRoaXMubXVsdGlQYWdlID8gMjQgOiAwCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIGNvbnN0IHJvdXRlID0gdGhpcy4kcm91dGUKICAgIHRoaXMucGFnZUxpc3QucHVzaChyb3V0ZSkKICAgIHRoaXMuYWN0aXZlUGFnZSA9IHJvdXRlLmZ1bGxQYXRoCiAgICBpZiAodGhpcy5tdWx0aVBhZ2UpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2U6Y2xvc2UnLCB0aGlzLmNsb3NlUGFnZUxpc3RlbmVyKQogICAgfQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLmNvcnJlY3RQYWdlTWluSGVpZ2h0KC10aGlzLnRhYnNPZmZzZXQpCiAgICBpZih0aGlzLm11bHRpUGFnZSl7CiAgICAgIHRoaXMuY2FjaGVkS2V5cy5wdXNoKHRoaXMuJHJlZnMudGFiQ29udGVudC4kdm5vZGUua2V5KQogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwYWdlOmNsb3NlJywgdGhpcy5jbG9zZVBhZ2VMaXN0ZW5lcikKICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQodGhpcy50YWJzT2Zmc2V0KQogIH0sCiAgd2F0Y2g6IHsKICAgICckcm91dGUnOiBmdW5jdGlvbiAobmV3Um91dGUpIHsKICAgICAgdGhpcy5hY3RpdmVQYWdlID0gbmV3Um91dGUuZnVsbFBhdGgKICAgICAgaWYgKCF0aGlzLm11bHRpUGFnZSkgewogICAgICAgIHRoaXMucGFnZUxpc3QgPSBbbmV3Um91dGVdCiAgICAgIH0gZWxzZSBpZiAodGhpcy5wYWdlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmZ1bGxQYXRoID09IG5ld1JvdXRlLmZ1bGxQYXRoKSA9PSAtMSkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuY2FjaGVkS2V5cy5wdXNoKHRoaXMuJHJlZnMudGFiQ29udGVudC4kdm5vZGUua2V5KQogICAgICAgIH0pCiAgICAgICAgdGhpcy5wYWdlTGlzdC5wdXNoKG5ld1JvdXRlKQogICAgICB9CiAgICB9LAogICAgJ211bHRpUGFnZSc6IGZ1bmN0aW9uIChuZXdWYWwpIHsKICAgICAgaWYgKCFuZXdWYWwpIHsKICAgICAgICB0aGlzLnBhZ2VMaXN0ID0gW3RoaXMuJHJvdXRlXQogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwYWdlOmNsb3NlJywgdGhpcy5jbG9zZVBhZ2VMaXN0ZW5lcikKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZTpjbG9zZScsIHRoaXMuY2xvc2VQYWdlTGlzdGVuZXIpCiAgICAgIH0KICAgIH0sCiAgICB0YWJzT2Zmc2V0KG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQob2xkVmFsIC0gbmV3VmFsKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlUGFnZSAoa2V5KSB7CiAgICAgIHRoaXMuYWN0aXZlUGFnZSA9IGtleQogICAgICB0aGlzLiRyb3V0ZXIucHVzaChrZXkpCiAgICB9LAogICAgZWRpdFBhZ2UgKGtleSwgYWN0aW9uKSB7CiAgICAgIHRoaXNbYWN0aW9uXShrZXkpIC8vIHJlbW92ZQogICAgfSwKICAgIHJlbW92ZSAoa2V5LCBuZXh0KSB7CiAgICAgIGlmICh0aGlzLnBhZ2VMaXN0Lmxlbmd0aCA9PT0gMSkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLndhcm5pbmcodGhpcy4kdCgnd2FybicpKQogICAgICB9CiAgICAgIGxldCBpbmRleCA9IHRoaXMucGFnZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5mdWxsUGF0aCA9PT0ga2V5KQogICAgICAvL+a4hemZpOe8k+WtmAogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gdGhpcy5jYWNoZWRLZXlzLnNwbGljZShpbmRleCwgMSkKICAgICAgdGhpcy5wYWdlTGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIGlmIChuZXh0KSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2gobmV4dCkKICAgICAgfSBlbHNlIGlmIChrZXkgPT09IHRoaXMuYWN0aXZlUGFnZSkgewogICAgICAgIGluZGV4ID0gaW5kZXggPj0gdGhpcy5wYWdlTGlzdC5sZW5ndGggPyB0aGlzLnBhZ2VMaXN0Lmxlbmd0aCAtIDEgOiBpbmRleAogICAgICAgIHRoaXMuYWN0aXZlUGFnZSA9IHRoaXMucGFnZUxpc3RbaW5kZXhdLmZ1bGxQYXRoCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5hY3RpdmVQYWdlKQogICAgICB9CiAgICB9LAogICAgb25Db250ZXh0bWVudSAoZSkgewogICAgICBjb25zdCBwYWdlS2V5ID0gZ2V0UGFnZUtleShlLnRhcmdldCkKICAgICAgaWYgKHBhZ2VLZXkpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICB0aGlzLm1lbnVWaXNpYmxlID0gdHJ1ZQogICAgICB9CiAgICB9LAogICAgb25NZW51U2VsZWN0IChrZXksIHRhcmdldCkgewogICAgICBsZXQgcGFnZUtleSA9IGdldFBhZ2VLZXkodGFyZ2V0KQogICAgICBzd2l0Y2ggKGtleSkgewogICAgICAgIGNhc2UgJzEnOiB0aGlzLmNsb3NlTGVmdChwYWdlS2V5KTsgYnJlYWsKICAgICAgICBjYXNlICcyJzogdGhpcy5jbG9zZVJpZ2h0KHBhZ2VLZXkpOyBicmVhawogICAgICAgIGNhc2UgJzMnOiB0aGlzLmNsb3NlT3RoZXJzKHBhZ2VLZXkpOyBicmVhawogICAgICAgIGRlZmF1bHQ6IGJyZWFrCiAgICAgIH0KICAgIH0sCiAgICBjbG9zZU90aGVycyAocGFnZUtleSkgewogICAgICBjb25zdCBpbmRleCA9IHRoaXMucGFnZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5mdWxsUGF0aCA9PT0gcGFnZUtleSkKICAgICAgLy8g5riF6Zmk57yT5a2YCiAgICAgIHRoaXMuY2xlYXJDYWNoZXMgPSB0aGlzLmNhY2hlZEtleXMuZmlsdGVyKChpdGVtLCBpKSA9PiBpICE9IGluZGV4KQogICAgICB0aGlzLmNhY2hlZEtleXMgPSB0aGlzLmNhY2hlZEtleXMuc2xpY2UoaW5kZXgsIGluZGV4ICsgMSkKCiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LnNsaWNlKGluZGV4LCBpbmRleCArIDEpCiAgICAgIGlmICh0aGlzLmFjdGl2ZVBhZ2UgIT0gcGFnZUtleSkgewogICAgICAgIHRoaXMuYWN0aXZlUGFnZSA9IHBhZ2VLZXkKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLmFjdGl2ZVBhZ2UpCiAgICAgIH0KICAgIH0sCiAgICBjbG9zZUxlZnQgKHBhZ2VLZXkpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhZ2VMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0uZnVsbFBhdGggPT09IHBhZ2VLZXkpCiAgICAgIC8vIOa4hemZpOe8k+WtmAogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gdGhpcy5jYWNoZWRLZXlzLmZpbHRlcigoaXRlbSwgaSkgPT4gaSA8IGluZGV4KQogICAgICB0aGlzLmNhY2hlZEtleXMgPSB0aGlzLmNhY2hlZEtleXMuc2xpY2UoaW5kZXgpCgogICAgICB0aGlzLnBhZ2VMaXN0ID0gdGhpcy5wYWdlTGlzdC5zbGljZShpbmRleCkKICAgICAgaWYgKCF0aGlzLnBhZ2VMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLmZ1bGxQYXRoID09PSB0aGlzLmFjdGl2ZVBhZ2UpKSB7CiAgICAgICAgdGhpcy5hY3RpdmVQYWdlID0gcGFnZUtleQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuYWN0aXZlUGFnZSkKICAgICAgfQogICAgfSwKICAgIGNsb3NlUmlnaHQgKHBhZ2VLZXkpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhZ2VMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0uZnVsbFBhdGggPT09IHBhZ2VLZXkpCiAgICAgIC8vIOa4hemZpOe8k+WtmAogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gdGhpcy5jYWNoZWRLZXlzLmZpbHRlcigoaXRlbSwgaSkgPT4gaSA+IGluZGV4KQogICAgICB0aGlzLmNhY2hlZEtleXMgPSB0aGlzLmNhY2hlZEtleXMuc2xpY2UoMCwgaW5kZXgrMSkKCiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LnNsaWNlKDAsIGluZGV4ICsgMSkKICAgICAgaWYgKCF0aGlzLnBhZ2VMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLmZ1bGxQYXRoID09PSB0aGlzLmFjdGl2ZVBhZ2UpKSB7CiAgICAgICAgdGhpcy5hY3RpdmVQYWdlID0gcGFnZUtleQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuYWN0aXZlUGFnZSkKICAgICAgfQogICAgfSwKICAgIHBhZ2VOYW1lKHBhZ2UpIHsKICAgICAgcmV0dXJuIHRoaXMuJHQoZ2V0STE4bktleShwYWdlLm1hdGNoZWRbcGFnZS5tYXRjaGVkLmxlbmd0aCAtIDFdLnBhdGgpKQogICAgfSwKICAgIGNsb3NlUGFnZUxpc3RlbmVyKGV2ZW50KSB7CiAgICAgIGNvbnN0IHtjbG9zZVJvdXRlLCBuZXh0Um91dGV9ID0gZXZlbnQuZGV0YWlsCiAgICAgIGNvbnN0IGNsb3NlUGF0aCA9IHR5cGVvZiBjbG9zZVJvdXRlID09PSAnc3RyaW5nJyA/IGNsb3NlUm91dGUgOiBjbG9zZVJvdXRlLnBhdGgKICAgICAgdGhpcy5yZW1vdmUoY2xvc2VQYXRoLCBuZXh0Um91dGUpCiAgICB9LAogICAgLi4ubWFwTXV0YXRpb25zKCdzZXR0aW5nJywgWydjb3JyZWN0UGFnZU1pbkhlaWdodCddKQogIH0KfQovKioKICog55Sx5LqOYW50LWRlc2lnbi12dWXnu4Tku7blupPnmoRUYWJQYW5l57uE5Lu25pqC5LiN5pSv5oyB6Ieq5a6a5LmJ55uR5ZCs5Zmo77yM5peg5rOV55u05o6l6I635Y+W5Yiw5Y+z6ZSudGFyZ2V05omA5Zyo5qCH562+6aG155qEIHBhZ2VrZXkg44CC5pWF5aKe5Yqg5q2k5pa55rOV55So5LqOCiAqIOafpeivouWPs+mUrnRhcmdldOaJgOWcqOagh+etvumhteeahOagh+ivhiBwYWdla2V5IO+8jOS7peeUqOS6juiHquWumuS5ieWPs+mUruiPnOWNleeahOS6i+S7tuWkhOeQhuOAggogKiDms6jvvJpUYWJQYW5l57uE5Lu25pSv5oyB6Ieq5a6a5LmJ55uR5ZCs5Zmo5ZCO5Y+v5Y676Zmk6K+l5pa55rOV5bm26YeN5p6EIOKAmOiHquWumuS5ieWPs+mUruiPnOWNleeahOS6i+S7tuWkhOeQhuKAmQogKiBAcGFyYW0gdGFyZ2V0IOafpeivouW8gOWni+ebruaghwogKiBAcGFyYW0gZGVwdGgg5p+l6K+i5bGC57qn5rex5bqmIO+8iOafpeaJvuWxgue6p+acgOWkmuS4jei2hei/hzPlsYLvvIzotoXov4cz5bGC5rex5bqm55u05o6l6L+U5ZueIG51bGzvvIkKICogQHJldHVybnMge1N0cmluZ30KICovCmZ1bmN0aW9uIGdldFBhZ2VLZXkgKHRhcmdldCwgZGVwdGggPSAwKSB7CiAgaWYgKGRlcHRoID4gMiB8fCAhdGFyZ2V0KSB7CiAgICByZXR1cm4gbnVsbAogIH0KICByZXR1cm4gdGFyZ2V0LmdldEF0dHJpYnV0ZSgncGFnZWtleScpIHx8IGdldFBhZ2VLZXkodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCArK2RlcHRoKQp9Cg=="},{"version":3,"sources":["TabsView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabsView.vue","sourceRoot":"src/layouts/tabs","sourcesContent":["<template>\n  <admin-layout>\n    <contextmenu :itemList=\"menuItemList\" :visible.sync=\"menuVisible\" @select=\"onMenuSelect\" />\n    <a-tabs\n      v-if=\"multiPage\"\n      type=\"editable-card\"\n      :active-key=\"activePage\"\n      :style=\"`margin: -16px auto 8px; ${layout == 'head' ? 'max-width: 1400px;' : ''}`\"\n      :hide-add=\"true\"\n      @change=\"changePage\"\n      @edit=\"editPage\"\n      @contextmenu=\"onContextmenu\"\n    >\n      <a-tab-pane :key=\"page.fullPath\" v-for=\"page in pageList\">\n        <span slot=\"tab\" :pagekey=\"page.fullPath\">{{pageName(page)}}</span>\n      </a-tab-pane>\n    </a-tabs>\n    <div class=\"tabs-view-content\" :style=\"`margin-top: ${multiPage ? -24 : 0}px`\">\n      <page-toggle-transition :disabled=\"animate.disabled\" :animate=\"animate.name\" :direction=\"animate.direction\">\n        <a-keep-alive v-if=\"multiPage\" v-model=\"clearCaches\">\n          <router-view ref=\"tabContent\" :key=\"$route.fullPath\" />\n        </a-keep-alive>\n        <router-view v-else />\n      </page-toggle-transition>\n    </div>\n  </admin-layout>\n</template>\n\n<script>\nimport AdminLayout from '@/layouts/AdminLayout'\nimport Contextmenu from '@/components/menu/Contextmenu'\nimport PageToggleTransition from '@/components/transition/PageToggleTransition'\nimport {mapState, mapMutations} from 'vuex'\nimport {getI18nKey} from '@/utils/routerUtil'\nimport AKeepAlive from '@/components/cache/AKeepAlive'\n\nexport default {\n  name: 'TabsView',\n  i18n: require('./i18n'),\n  components: { PageToggleTransition, Contextmenu, AdminLayout , AKeepAlive },\n  data () {\n    return {\n      clearCaches: [],\n      pageList: [],\n      cachedKeys: [],\n      activePage: '',\n      menuVisible: false\n    }\n  },\n  computed: {\n    ...mapState('setting', ['multiPage', 'animate', 'layout']),\n    menuItemList() {\n      return [\n        { key: '1', icon: 'vertical-right', text: this.$t('closeLeft') },\n        { key: '2', icon: 'vertical-left', text: this.$t('closeRight') },\n        { key: '3', icon: 'close', text: this.$t('closeOthers') }\n      ]\n    },\n    tabsOffset() {\n      return this.multiPage ? 24 : 0\n    }\n  },\n  created () {\n    const route = this.$route\n    this.pageList.push(route)\n    this.activePage = route.fullPath\n    if (this.multiPage) {\n      window.addEventListener('page:close', this.closePageListener)\n    }\n  },\n  mounted () {\n    this.correctPageMinHeight(-this.tabsOffset)\n    if(this.multiPage){\n      this.cachedKeys.push(this.$refs.tabContent.$vnode.key)\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('page:close', this.closePageListener)\n    this.correctPageMinHeight(this.tabsOffset)\n  },\n  watch: {\n    '$route': function (newRoute) {\n      this.activePage = newRoute.fullPath\n      if (!this.multiPage) {\n        this.pageList = [newRoute]\n      } else if (this.pageList.findIndex(item => item.fullPath == newRoute.fullPath) == -1) {\n        this.$nextTick(() => {\n          this.cachedKeys.push(this.$refs.tabContent.$vnode.key)\n        })\n        this.pageList.push(newRoute)\n      }\n    },\n    'multiPage': function (newVal) {\n      if (!newVal) {\n        this.pageList = [this.$route]\n        window.removeEventListener('page:close', this.closePageListener)\n      } else {\n        window.addEventListener('page:close', this.closePageListener)\n      }\n    },\n    tabsOffset(newVal, oldVal) {\n      this.correctPageMinHeight(oldVal - newVal)\n    }\n  },\n  methods: {\n    changePage (key) {\n      this.activePage = key\n      this.$router.push(key)\n    },\n    editPage (key, action) {\n      this[action](key) // remove\n    },\n    remove (key, next) {\n      if (this.pageList.length === 1) {\n        return this.$message.warning(this.$t('warn'))\n      }\n      let index = this.pageList.findIndex(item => item.fullPath === key)\n      //清除缓存\n      this.clearCaches = this.cachedKeys.splice(index, 1)\n      this.pageList.splice(index, 1)\n      if (next) {\n        this.$router.push(next)\n      } else if (key === this.activePage) {\n        index = index >= this.pageList.length ? this.pageList.length - 1 : index\n        this.activePage = this.pageList[index].fullPath\n        this.$router.push(this.activePage)\n      }\n    },\n    onContextmenu (e) {\n      const pageKey = getPageKey(e.target)\n      if (pageKey) {\n        e.preventDefault()\n        this.menuVisible = true\n      }\n    },\n    onMenuSelect (key, target) {\n      let pageKey = getPageKey(target)\n      switch (key) {\n        case '1': this.closeLeft(pageKey); break\n        case '2': this.closeRight(pageKey); break\n        case '3': this.closeOthers(pageKey); break\n        default: break\n      }\n    },\n    closeOthers (pageKey) {\n      const index = this.pageList.findIndex(item => item.fullPath === pageKey)\n      // 清除缓存\n      this.clearCaches = this.cachedKeys.filter((item, i) => i != index)\n      this.cachedKeys = this.cachedKeys.slice(index, index + 1)\n\n      this.pageList = this.pageList.slice(index, index + 1)\n      if (this.activePage != pageKey) {\n        this.activePage = pageKey\n        this.$router.push(this.activePage)\n      }\n    },\n    closeLeft (pageKey) {\n      const index = this.pageList.findIndex(item => item.fullPath === pageKey)\n      // 清除缓存\n      this.clearCaches = this.cachedKeys.filter((item, i) => i < index)\n      this.cachedKeys = this.cachedKeys.slice(index)\n\n      this.pageList = this.pageList.slice(index)\n      if (!this.pageList.find(item => item.fullPath === this.activePage)) {\n        this.activePage = pageKey\n        this.$router.push(this.activePage)\n      }\n    },\n    closeRight (pageKey) {\n      const index = this.pageList.findIndex(item => item.fullPath === pageKey)\n      // 清除缓存\n      this.clearCaches = this.cachedKeys.filter((item, i) => i > index)\n      this.cachedKeys = this.cachedKeys.slice(0, index+1)\n\n      this.pageList = this.pageList.slice(0, index + 1)\n      if (!this.pageList.find(item => item.fullPath === this.activePage)) {\n        this.activePage = pageKey\n        this.$router.push(this.activePage)\n      }\n    },\n    pageName(page) {\n      return this.$t(getI18nKey(page.matched[page.matched.length - 1].path))\n    },\n    closePageListener(event) {\n      const {closeRoute, nextRoute} = event.detail\n      const closePath = typeof closeRoute === 'string' ? closeRoute : closeRoute.path\n      this.remove(closePath, nextRoute)\n    },\n    ...mapMutations('setting', ['correctPageMinHeight'])\n  }\n}\n/**\n * 由于ant-design-vue组件库的TabPane组件暂不支持自定义监听器，无法直接获取到右键target所在标签页的 pagekey 。故增加此方法用于\n * 查询右键target所在标签页的标识 pagekey ，以用于自定义右键菜单的事件处理。\n * 注：TabPane组件支持自定义监听器后可去除该方法并重构 ‘自定义右键菜单的事件处理’\n * @param target 查询开始目标\n * @param depth 查询层级深度 （查找层级最多不超过3层，超过3层深度直接返回 null）\n * @returns {String}\n */\nfunction getPageKey (target, depth = 0) {\n  if (depth > 2 || !target) {\n    return null\n  }\n  return target.getAttribute('pagekey') || getPageKey(target.firstElementChild, ++depth)\n}\n</script>\n\n<style scoped lang=\"less\">\n  .tabs-view-content{\n    position: relative;\n  }\n</style>\n"]}]}