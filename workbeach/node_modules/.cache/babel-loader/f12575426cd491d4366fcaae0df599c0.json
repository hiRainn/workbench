{"remainingRequest":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/babel-loader/lib/index.js!/Applications/MAMP/gopath/workbench/workbeach/node_modules/eslint-loader/index.js??ref--13-0!/Applications/MAMP/gopath/workbench/workbeach/src/utils/authority-utils.js","dependencies":[{"path":"/Applications/MAMP/gopath/workbench/workbeach/src/utils/authority-utils.js","mtime":1598927029045},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdHlwZW9mIGZyb20gIi9BcHBsaWNhdGlvbnMvTUFNUC9nb3BhdGgvd29ya2JlbmNoL3dvcmtiZWFjaC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKCi8qKgogKiDliKTmlq3mmK/lkKbmnInot6/nlLHnmoTmnYPpmZAKICogQHBhcmFtIHJvdXRlIOi3r+eUsQogKiBAcGFyYW0gcGVybWlzc2lvbnMg55So5oi35p2D6ZmQ6ZuG5ZCICiAqIEByZXR1cm5zIHtib29sZWFufCp9CiAqLwpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHJvdXRlLCBwZXJtaXNzaW9ucykgewogIHZhciBhdXRob3JpdHkgPSByb3V0ZS5tZXRhLmF1dGhvcml0eSB8fCAnKic7CiAgdmFyIHJlcXVpcmVkID0gJyonOwoKICBpZiAodHlwZW9mIGF1dGhvcml0eSA9PT0gJ3N0cmluZycpIHsKICAgIHJlcXVpcmVkID0gYXV0aG9yaXR5OwogIH0gZWxzZSBpZiAoX3R5cGVvZihhdXRob3JpdHkpID09PSAnb2JqZWN0JykgewogICAgcmVxdWlyZWQgPSBhdXRob3JpdHkucGVybWlzc2lvbjsKICB9CgogIHJldHVybiByZXF1aXJlZCA9PT0gJyonIHx8IHBlcm1pc3Npb25zICYmIHBlcm1pc3Npb25zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0gPT09IHJlcXVpcmVkIHx8IGl0ZW0uaWQgPT09IHJlcXVpcmVkOwogIH0pICE9PSAtMTsKfQovKioKICog5Yik5pat5piv5ZCm5pyJ6Lev55Sx6ZyA6KaB55qE6KeS6ImyCiAqIEBwYXJhbSByb3V0ZSDot6/nlLEKICogQHBhcmFtIHJvbGVzIOeUqOaIt+inkuiJsumbhuWQiAogKi8KCgpmdW5jdGlvbiBoYXNSb2xlKHJvdXRlLCByb2xlcykgewogIHZhciBhdXRob3JpdHkgPSByb3V0ZS5tZXRhLmF1dGhvcml0eSB8fCAnKic7CiAgdmFyIHJlcXVpcmVkID0gdW5kZWZpbmVkOwoKICBpZiAoX3R5cGVvZihhdXRob3JpdHkpID09PSAnb2JqZWN0JykgewogICAgcmVxdWlyZWQgPSBhdXRob3JpdHkucm9sZTsKICB9CgogIHJldHVybiBhdXRob3JpdHkgPT09ICcqJyB8fCBoYXNBbnlSb2xlKHJlcXVpcmVkLCByb2xlcyk7Cn0KLyoqCiAqIOWIpOaWreaYr+WQpuaciemcgOimgeeahOS7u+aEj+S4gOS4quinkuiJsgogKiBAcGFyYW0gcmVxdWlyZWQge1N0cmluZyB8IEFycmF5W1N0cmluZ119IOmcgOimgeeahOinkuiJsu+8jOWPr+S7peaYr+WNleS4quinkuiJsuaIluiAheS4gOS4quinkuiJsuaVsOe7hAogKiBAcGFyYW0gcm9sZXMg5oul5pyJ55qE6KeS6ImyCiAqIEByZXR1cm5zIHtib29sZWFufQogKi8KCgpmdW5jdGlvbiBoYXNBbnlSb2xlKHJlcXVpcmVkLCByb2xlcykgewogIGlmICghcmVxdWlyZWQpIHsKICAgIHJldHVybiBmYWxzZTsKICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmVxdWlyZWQpKSB7CiAgICByZXR1cm4gcm9sZXMuZmluZEluZGV4KGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgIHJldHVybiByZXF1aXJlZC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbSA9PT0gcm9sZSB8fCBpdGVtID09PSByb2xlLmlkOwogICAgICB9KSAhPT0gLTE7CiAgICB9KSAhPT0gLTE7CiAgfSBlbHNlIHsKICAgIHJldHVybiByb2xlcy5maW5kSW5kZXgoZnVuY3Rpb24gKHJvbGUpIHsKICAgICAgcmV0dXJuIHJvbGUgPT09IHJlcXVpcmVkIHx8IHJvbGUuaWQgPT09IHJlcXVpcmVkOwogICAgfSkgIT09IC0xOwogIH0KfQovKioKICog5qC55o2u5p2D6ZmQ6YWN572u6L+H5ruk6I+c5Y2V5pWw5o2uCiAqIEBwYXJhbSBtZW51RGF0YQogKiBAcGFyYW0gcGVybWlzc2lvbnMKICogQHBhcmFtIHJvbGVzCiAqLwoKCmZ1bmN0aW9uIGZpbHRlck1lbnUobWVudURhdGEsIHBlcm1pc3Npb25zLCByb2xlcykgewogIG1lbnVEYXRhLmZvckVhY2goZnVuY3Rpb24gKG1lbnUpIHsKICAgIG1lbnUubWV0YS5pbnZpc2libGUgPSAhaGFzUGVybWlzc2lvbihtZW51LCBwZXJtaXNzaW9ucykgJiYgIWhhc1JvbGUobWVudSwgcm9sZXMpOwoKICAgIGlmIChtZW51LmNoaWxkcmVuICYmIG1lbnUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICBmaWx0ZXJNZW51KG1lbnUuY2hpbGRyZW4sIHBlcm1pc3Npb25zLCByb2xlcyk7CiAgICB9CiAgfSk7Cn0KCmV4cG9ydCB7IGhhc1Blcm1pc3Npb24sIGhhc1JvbGUsIGZpbHRlck1lbnUgfTs="},{"version":3,"sources":["/Applications/MAMP/gopath/workbench/workbeach/src/utils/authority-utils.js"],"names":["hasPermission","route","permissions","authority","meta","required","permission","findIndex","item","id","hasRole","roles","undefined","role","hasAnyRole","Array","isArray","filterMenu","menuData","forEach","menu","invisible","children","length"],"mappings":";;;;;AAAA;;;;;;AAMA,SAASA,aAAT,CAAuBC,KAAvB,EAA8BC,WAA9B,EAA2C;AACzC,MAAMC,SAAS,GAAGF,KAAK,CAACG,IAAN,CAAWD,SAAX,IAAwB,GAA1C;AACA,MAAIE,QAAQ,GAAG,GAAf;;AACA,MAAI,OAAOF,SAAP,KAAqB,QAAzB,EAAmC;AACjCE,IAAAA,QAAQ,GAAGF,SAAX;AACD,GAFD,MAEO,IAAI,QAAOA,SAAP,MAAqB,QAAzB,EAAmC;AACxCE,IAAAA,QAAQ,GAAGF,SAAS,CAACG,UAArB;AACD;;AACD,SAAOD,QAAQ,KAAK,GAAb,IAAqBH,WAAW,IAAIA,WAAW,CAACK,SAAZ,CAAsB,UAAAC,IAAI;AAAA,WAAIA,IAAI,KAAKH,QAAT,IAAqBG,IAAI,CAACC,EAAL,KAAYJ,QAArC;AAAA,GAA1B,MAA6E,CAAC,CAAzH;AACD;AAED;;;;;;;AAKA,SAASK,OAAT,CAAiBT,KAAjB,EAAwBU,KAAxB,EAA+B;AAC7B,MAAMR,SAAS,GAAGF,KAAK,CAACG,IAAN,CAAWD,SAAX,IAAwB,GAA1C;AACA,MAAIE,QAAQ,GAAGO,SAAf;;AACA,MAAI,QAAOT,SAAP,MAAqB,QAAzB,EAAmC;AACjCE,IAAAA,QAAQ,GAAGF,SAAS,CAACU,IAArB;AACD;;AACD,SAAOV,SAAS,KAAK,GAAd,IAAqBW,UAAU,CAACT,QAAD,EAAWM,KAAX,CAAtC;AACD;AAED;;;;;;;;AAMA,SAASG,UAAT,CAAoBT,QAApB,EAA8BM,KAA9B,EAAqC;AACnC,MAAI,CAACN,QAAL,EAAe;AACb,WAAO,KAAP;AACD,GAFD,MAEO,IAAGU,KAAK,CAACC,OAAN,CAAcX,QAAd,CAAH,EAA4B;AACjC,WAAOM,KAAK,CAACJ,SAAN,CAAgB,UAAAM,IAAI,EAAI;AAC7B,aAAOR,QAAQ,CAACE,SAAT,CAAmB,UAAAC,IAAI;AAAA,eAAIA,IAAI,KAAKK,IAAT,IAAiBL,IAAI,KAAKK,IAAI,CAACJ,EAAnC;AAAA,OAAvB,MAAkE,CAAC,CAA1E;AACD,KAFM,MAEA,CAAC,CAFR;AAGD,GAJM,MAIA;AACL,WAAOE,KAAK,CAACJ,SAAN,CAAgB,UAAAM,IAAI;AAAA,aAAIA,IAAI,KAAKR,QAAT,IAAqBQ,IAAI,CAACJ,EAAL,KAAYJ,QAArC;AAAA,KAApB,MAAuE,CAAC,CAA/E;AACD;AACF;AAED;;;;;;;;AAMA,SAASY,UAAT,CAAoBC,QAApB,EAA8BhB,WAA9B,EAA2CS,KAA3C,EAAkD;AAChDO,EAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAAC,IAAI,EAAI;AACvBA,IAAAA,IAAI,CAAChB,IAAL,CAAUiB,SAAV,GAAsB,CAACrB,aAAa,CAACoB,IAAD,EAAOlB,WAAP,CAAd,IAAqC,CAACQ,OAAO,CAACU,IAAD,EAAOT,KAAP,CAAnE;;AACA,QAAIS,IAAI,CAACE,QAAL,IAAiBF,IAAI,CAACE,QAAL,CAAcC,MAAd,GAAuB,CAA5C,EAA+C;AAC7CN,MAAAA,UAAU,CAACG,IAAI,CAACE,QAAN,EAAgBpB,WAAhB,EAA6BS,KAA7B,CAAV;AACD;AACF,GALD;AAMD;;AAED,SAAQX,aAAR,EAAuBU,OAAvB,EAAgCO,UAAhC","sourcesContent":["/**\n * 判断是否有路由的权限\n * @param route 路由\n * @param permissions 用户权限集合\n * @returns {boolean|*}\n */\nfunction hasPermission(route, permissions) {\n  const authority = route.meta.authority || '*'\n  let required = '*'\n  if (typeof authority === 'string') {\n    required = authority\n  } else if (typeof authority === 'object') {\n    required = authority.permission\n  }\n  return required === '*' || (permissions && permissions.findIndex(item => item === required || item.id === required) !== -1)\n}\n\n/**\n * 判断是否有路由需要的角色\n * @param route 路由\n * @param roles 用户角色集合\n */\nfunction hasRole(route, roles) {\n  const authority = route.meta.authority || '*'\n  let required = undefined\n  if (typeof authority === 'object') {\n    required = authority.role\n  }\n  return authority === '*' || hasAnyRole(required, roles)\n}\n\n/**\n * 判断是否有需要的任意一个角色\n * @param required {String | Array[String]} 需要的角色，可以是单个角色或者一个角色数组\n * @param roles 拥有的角色\n * @returns {boolean}\n */\nfunction hasAnyRole(required, roles) {\n  if (!required) {\n    return false\n  } else if(Array.isArray(required)) {\n    return roles.findIndex(role => {\n      return required.findIndex(item => item === role || item === role.id) !== -1\n    }) !== -1\n  } else {\n    return roles.findIndex(role => role === required || role.id === required) !== -1\n  }\n}\n\n/**\n * 根据权限配置过滤菜单数据\n * @param menuData\n * @param permissions\n * @param roles\n */\nfunction filterMenu(menuData, permissions, roles) {\n  menuData.forEach(menu => {\n    menu.meta.invisible = !hasPermission(menu, permissions) && !hasRole(menu, roles)\n    if (menu.children && menu.children.length > 0) {\n      filterMenu(menu.children, permissions, roles)\n    }\n  })\n}\n\nexport {hasPermission, hasRole, filterMenu}\n"]}]}