{"remainingRequest":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/babel-loader/lib/index.js!/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Applications/MAMP/gopath/vue-antd-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/gopath/vue-antd-admin/src/components/table/StandardTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/MAMP/gopath/vue-antd-admin/src/components/table/StandardTable.vue","mtime":1598927029001},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL0FwcGxpY2F0aW9ucy9NQU1QL2dvcGF0aC92dWUtYW50ZC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3RhbmRhcmRUYWJsZScsCiAgcHJvcHM6IHsKICAgIGJvcmRlcmVkOiBCb29sZWFuLAogICAgbG9hZGluZzogW0Jvb2xlYW4sIE9iamVjdF0sCiAgICBjb2x1bW5zOiBBcnJheSwKICAgIGRhdGFTb3VyY2U6IEFycmF5LAogICAgcm93S2V5OiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSwKICAgICAgZGVmYXVsdDogJ2tleScKICAgIH0sCiAgICBwYWdpbmF0aW9uOiB7CiAgICAgIHR5cGU6IFtPYmplY3QsIEJvb2xlYW5dLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgc2VsZWN0ZWRSb3dzOiBBcnJheSwKICAgIGV4cGFuZGVkUm93S2V5czogQXJyYXksCiAgICBleHBhbmRlZFJvd1JlbmRlcjogRnVuY3Rpb24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuZWVkVG90YWxMaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVNlbGVjdDogZnVuY3Rpb24gdXBkYXRlU2VsZWN0KHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpzZWxlY3RlZFJvd3MnLCBzZWxlY3RlZFJvd3MpOwogICAgICB0aGlzLiRlbWl0KCdzZWxlY3RlZFJvd0NoYW5nZScsIHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKTsKICAgIH0sCiAgICBpbml0VG90YWxMaXN0OiBmdW5jdGlvbiBpbml0VG90YWxMaXN0KGNvbHVtbnMpIHsKICAgICAgdmFyIHRvdGFsTGlzdCA9IGNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubmVlZFRvdGFsOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgIHRvdGFsOiAwCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gdG90YWxMaXN0OwogICAgfSwKICAgIG9uQ2xlYXI6IGZ1bmN0aW9uIG9uQ2xlYXIoKSB7CiAgICAgIHRoaXMudXBkYXRlU2VsZWN0KFtdLCBbXSk7CiAgICAgIHRoaXMuJGVtaXQoJ2NsZWFyJyk7CiAgICB9LAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHBhZ2luYXRpb24sIGZpbHRlcnMsIHNvcnRlciwgX3JlZikgewogICAgICB2YXIgY3VycmVudERhdGFTb3VyY2UgPSBfcmVmLmN1cnJlbnREYXRhU291cmNlOwogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCBwYWdpbmF0aW9uLCBmaWx0ZXJzLCBzb3J0ZXIsIHsKICAgICAgICBjdXJyZW50RGF0YVNvdXJjZTogY3VycmVudERhdGFTb3VyY2UKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5uZWVkVG90YWxMaXN0ID0gdGhpcy5pbml0VG90YWxMaXN0KHRoaXMuY29sdW1ucyk7CiAgfSwKICB3YXRjaDogewogICAgc2VsZWN0ZWRSb3dzOiBmdW5jdGlvbiBzZWxlY3RlZFJvd3MoX3NlbGVjdGVkUm93cykgewogICAgICB0aGlzLm5lZWRUb3RhbExpc3QgPSB0aGlzLm5lZWRUb3RhbExpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbSksIHt9LCB7CiAgICAgICAgICB0b3RhbDogX3NlbGVjdGVkUm93cy5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgdmFsKSB7CiAgICAgICAgICAgIHJldHVybiBzdW0gKyB2YWxbaXRlbS5kYXRhSW5kZXhdOwogICAgICAgICAgfSwgMCkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc2VsZWN0ZWRSb3dLZXlzOiBmdW5jdGlvbiBzZWxlY3RlZFJvd0tleXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFJvd3MubWFwKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIF90aGlzLnJvd0tleSA9PT0gJ2Z1bmN0aW9uJyA/IF90aGlzLnJvd0tleShyZWNvcmQpIDogcmVjb3JkW190aGlzLnJvd0tleV07CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["StandardTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA,OADA;AAEA,IAAA,OAAA,EAAA,CAAA,OAAA,EAAA,MAAA,CAFA;AAGA,IAAA,OAAA,EAAA,KAHA;AAIA,IAAA,UAAA,EAAA,KAJA;AAKA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,QAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,OAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAFA,KATA;AAaA,IAAA,YAAA,EAAA,KAbA;AAcA,IAAA,eAAA,EAAA,KAdA;AAeA,IAAA,iBAAA,EAAA;AAfA,GAFA;AAmBA,EAAA,IAnBA,kBAmBA;AACA,WAAA;AACA,MAAA,aAAA,EAAA;AADA,KAAA;AAGA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,eADA,EACA,YADA,EACA;AACA,WAAA,KAAA,CAAA,qBAAA,EAAA,YAAA;AACA,WAAA,KAAA,CAAA,mBAAA,EAAA,eAAA,EAAA,YAAA;AACA,KAJA;AAKA,IAAA,aALA,yBAKA,OALA,EAKA;AACA,UAAA,SAAA,GAAA,OAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,SAAA;AAAA,OAAA,EACA,GADA,CACA,UAAA,IAAA,EAAA;AACA,+CACA,IADA;AAEA,UAAA,KAAA,EAAA;AAFA;AAIA,OANA,CAAA;AAOA,aAAA,SAAA;AACA,KAdA;AAeA,IAAA,OAfA,qBAeA;AACA,WAAA,YAAA,CAAA,EAAA,EAAA,EAAA;AACA,WAAA,KAAA,CAAA,OAAA;AACA,KAlBA;AAmBA,IAAA,QAnBA,oBAmBA,UAnBA,EAmBA,OAnBA,EAmBA,MAnBA,QAmBA;AAAA,UAAA,iBAAA,QAAA,iBAAA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,UAAA,EAAA,OAAA,EAAA,MAAA,EAAA;AAAA,QAAA,iBAAA,EAAA;AAAA,OAAA;AACA;AArBA,GAxBA;AA+CA,EAAA,OA/CA,qBA+CA;AACA,SAAA,aAAA,GAAA,KAAA,aAAA,CAAA,KAAA,OAAA,CAAA;AACA,GAjDA;AAkDA,EAAA,KAAA,EAAA;AACA,IAAA,YADA,wBACA,aADA,EACA;AACA,WAAA,aAAA,GAAA,KAAA,aAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,+CACA,IADA;AAEA,UAAA,KAAA,EAAA,aAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA,GAAA,EAAA;AACA,mBAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA;AACA,WAFA,EAEA,CAFA;AAFA;AAMA,OAPA,CAAA;AAQA;AAVA,GAlDA;AA8DA,EAAA,QAAA,EAAA;AACA,IAAA,eADA,6BACA;AAAA;;AACA,aAAA,KAAA,YAAA,CAAA,GAAA,CAAA,UAAA,MAAA,EAAA;AACA,eAAA,OAAA,KAAA,CAAA,MAAA,KAAA,UAAA,GAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,GAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AACA,OAFA,CAAA;AAGA;AALA;AA9DA,CAAA","sourcesContent":["<template>\n  <div class=\"standard-table\">\n    <div class=\"alert\">\n      <a-alert type=\"info\" :show-icon=\"true\" v-if=\"selectedRows\">\n        <div class=\"message\" slot=\"message\">\n          已选择&nbsp;<a>{{selectedRows.length}}</a>&nbsp;项 <a class=\"clear\" @click=\"onClear\">清空</a>\n          <template  v-for=\"(item, index) in needTotalList\" >\n            <div v-if=\"item.needTotal\" :key=\"index\">\n              {{item.title}}总计&nbsp;\n              <a>{{item.customRender ? item.customRender(item.total) : item.total}}</a>\n            </div>\n          </template>\n        </div>\n      </a-alert>\n    </div>\n    <a-table\n      :bordered=\"bordered\"\n      :loading=\"loading\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :rowKey=\"rowKey\"\n      :pagination=\"pagination\"\n      :expandedRowKeys=\"expandedRowKeys\"\n      :expandedRowRender=\"expandedRowRender\"\n      @change=\"onChange\"\n      :rowSelection=\"selectedRows ? {selectedRowKeys: selectedRowKeys, onChange: updateSelect} : undefined\"\n    >\n      <template slot-scope=\"text, record, index\" :slot=\"slot\" v-for=\"slot in Object.keys($scopedSlots).filter(key => key !== 'expandedRowRender') \">\n        <slot :name=\"slot\" v-bind=\"{text, record, index}\"></slot>\n      </template>\n      <template :slot=\"slot\" v-for=\"slot in Object.keys($slots)\">\n        <slot :name=\"slot\"></slot>\n      </template>\n      <template slot-scope=\"record, index, indent, expanded\" :slot=\"$scopedSlots.expandedRowRender ? 'expandedRowRender' : ''\">\n        <slot v-bind=\"{record, index, indent, expanded}\" :name=\"$scopedSlots.expandedRowRender ? 'expandedRowRender' : ''\"></slot>\n      </template>\n    </a-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'StandardTable',\n  props: {\n    bordered: Boolean,\n    loading: [Boolean, Object],\n    columns: Array,\n    dataSource: Array,\n    rowKey: {\n      type: [String, Function],\n      default: 'key'\n    },\n    pagination: {\n      type: [Object, Boolean],\n      default: true\n    },\n    selectedRows: Array,\n    expandedRowKeys: Array,\n    expandedRowRender: Function\n  },\n  data () {\n    return {\n      needTotalList: []\n    }\n  },\n  methods: {\n    updateSelect (selectedRowKeys, selectedRows) {\n      this.$emit('update:selectedRows', selectedRows)\n      this.$emit('selectedRowChange', selectedRowKeys, selectedRows)\n    },\n    initTotalList (columns) {\n      const totalList = columns.filter(item => item.needTotal)\n        .map(item => {\n          return {\n            ...item,\n            total: 0\n          }\n        })\n      return totalList\n    },\n    onClear() {\n      this.updateSelect([], [])\n      this.$emit('clear')\n    },\n    onChange(pagination, filters, sorter, {currentDataSource}) {\n      this.$emit('change', pagination, filters, sorter, {currentDataSource})\n    }\n  },\n  created () {\n    this.needTotalList = this.initTotalList(this.columns)\n  },\n  watch: {\n    selectedRows (selectedRows) {\n      this.needTotalList = this.needTotalList.map(item => {\n        return {\n          ...item,\n          total: selectedRows.reduce((sum, val) => {\n            return sum + val[item.dataIndex]\n          }, 0)\n        }\n      })\n    }\n  },\n  computed: {\n    selectedRowKeys() {\n      return this.selectedRows.map(record => {\n        return (typeof this.rowKey === 'function') ? this.rowKey(record) : record[this.rowKey]\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.standard-table{\n  .alert{\n    margin-bottom: 16px;\n    .message{\n      a{\n        font-weight: 600;\n      }\n    }\n    .clear{\n      float: right;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/table"}]}