{"remainingRequest":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/babel-loader/lib/index.js!/Applications/MAMP/gopath/vue-antd-admin/node_modules/eslint-loader/index.js??ref--13-0!/Applications/MAMP/gopath/vue-antd-admin/src/utils/authority-utils.js","dependencies":[{"path":"/Applications/MAMP/gopath/vue-antd-admin/src/utils/authority-utils.js","mtime":1598927029045},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdHlwZW9mIGZyb20gIi9BcHBsaWNhdGlvbnMvTUFNUC9nb3BhdGgvdnVlLWFudGQtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CgovKioKICog5Yik5pat5piv5ZCm5pyJ6Lev55Sx55qE5p2D6ZmQCiAqIEBwYXJhbSByb3V0ZSDot6/nlLEKICogQHBhcmFtIHBlcm1pc3Npb25zIOeUqOaIt+adg+mZkOmbhuWQiAogKiBAcmV0dXJucyB7Ym9vbGVhbnwqfQogKi8KZnVuY3Rpb24gaGFzUGVybWlzc2lvbihyb3V0ZSwgcGVybWlzc2lvbnMpIHsKICB2YXIgYXV0aG9yaXR5ID0gcm91dGUubWV0YS5hdXRob3JpdHkgfHwgJyonOwogIHZhciByZXF1aXJlZCA9ICcqJzsKCiAgaWYgKHR5cGVvZiBhdXRob3JpdHkgPT09ICdzdHJpbmcnKSB7CiAgICByZXF1aXJlZCA9IGF1dGhvcml0eTsKICB9IGVsc2UgaWYgKF90eXBlb2YoYXV0aG9yaXR5KSA9PT0gJ29iamVjdCcpIHsKICAgIHJlcXVpcmVkID0gYXV0aG9yaXR5LnBlcm1pc3Npb247CiAgfQoKICByZXR1cm4gcmVxdWlyZWQgPT09ICcqJyB8fCBwZXJtaXNzaW9ucyAmJiBwZXJtaXNzaW9ucy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtID09PSByZXF1aXJlZCB8fCBpdGVtLmlkID09PSByZXF1aXJlZDsKICB9KSAhPT0gLTE7Cn0KLyoqCiAqIOWIpOaWreaYr+WQpuaciei3r+eUsemcgOimgeeahOinkuiJsgogKiBAcGFyYW0gcm91dGUg6Lev55SxCiAqIEBwYXJhbSByb2xlcyDnlKjmiLfop5LoibLpm4blkIgKICovCgoKZnVuY3Rpb24gaGFzUm9sZShyb3V0ZSwgcm9sZXMpIHsKICB2YXIgYXV0aG9yaXR5ID0gcm91dGUubWV0YS5hdXRob3JpdHkgfHwgJyonOwogIHZhciByZXF1aXJlZCA9IHVuZGVmaW5lZDsKCiAgaWYgKF90eXBlb2YoYXV0aG9yaXR5KSA9PT0gJ29iamVjdCcpIHsKICAgIHJlcXVpcmVkID0gYXV0aG9yaXR5LnJvbGU7CiAgfQoKICByZXR1cm4gYXV0aG9yaXR5ID09PSAnKicgfHwgaGFzQW55Um9sZShyZXF1aXJlZCwgcm9sZXMpOwp9Ci8qKgogKiDliKTmlq3mmK/lkKbmnInpnIDopoHnmoTku7vmhI/kuIDkuKrop5LoibIKICogQHBhcmFtIHJlcXVpcmVkIHtTdHJpbmcgfCBBcnJheVtTdHJpbmddfSDpnIDopoHnmoTop5LoibLvvIzlj6/ku6XmmK/ljZXkuKrop5LoibLmiJbogIXkuIDkuKrop5LoibLmlbDnu4QKICogQHBhcmFtIHJvbGVzIOaLpeacieeahOinkuiJsgogKiBAcmV0dXJucyB7Ym9vbGVhbn0KICovCgoKZnVuY3Rpb24gaGFzQW55Um9sZShyZXF1aXJlZCwgcm9sZXMpIHsKICBpZiAoIXJlcXVpcmVkKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlcXVpcmVkKSkgewogICAgcmV0dXJuIHJvbGVzLmZpbmRJbmRleChmdW5jdGlvbiAocm9sZSkgewogICAgICByZXR1cm4gcmVxdWlyZWQuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0gPT09IHJvbGUgfHwgaXRlbSA9PT0gcm9sZS5pZDsKICAgICAgfSkgIT09IC0xOwogICAgfSkgIT09IC0xOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcm9sZXMuZmluZEluZGV4KGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgIHJldHVybiByb2xlID09PSByZXF1aXJlZCB8fCByb2xlLmlkID09PSByZXF1aXJlZDsKICAgIH0pICE9PSAtMTsKICB9Cn0KLyoqCiAqIOagueaNruadg+mZkOmFjee9rui/h+a7pOiPnOWNleaVsOaNrgogKiBAcGFyYW0gbWVudURhdGEKICogQHBhcmFtIHBlcm1pc3Npb25zCiAqIEBwYXJhbSByb2xlcwogKi8KCgpmdW5jdGlvbiBmaWx0ZXJNZW51KG1lbnVEYXRhLCBwZXJtaXNzaW9ucywgcm9sZXMpIHsKICBtZW51RGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChtZW51KSB7CiAgICBtZW51Lm1ldGEuaW52aXNpYmxlID0gIWhhc1Blcm1pc3Npb24obWVudSwgcGVybWlzc2lvbnMpICYmICFoYXNSb2xlKG1lbnUsIHJvbGVzKTsKCiAgICBpZiAobWVudS5jaGlsZHJlbiAmJiBtZW51LmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgZmlsdGVyTWVudShtZW51LmNoaWxkcmVuLCBwZXJtaXNzaW9ucywgcm9sZXMpOwogICAgfQogIH0pOwp9CgpleHBvcnQgeyBoYXNQZXJtaXNzaW9uLCBoYXNSb2xlLCBmaWx0ZXJNZW51IH07"},{"version":3,"sources":["/Applications/MAMP/gopath/vue-antd-admin/src/utils/authority-utils.js"],"names":["hasPermission","route","permissions","authority","meta","required","permission","findIndex","item","id","hasRole","roles","undefined","role","hasAnyRole","Array","isArray","filterMenu","menuData","forEach","menu","invisible","children","length"],"mappings":";;;;;AAAA;;;;;;AAMA,SAASA,aAAT,CAAuBC,KAAvB,EAA8BC,WAA9B,EAA2C;AACzC,MAAMC,SAAS,GAAGF,KAAK,CAACG,IAAN,CAAWD,SAAX,IAAwB,GAA1C;AACA,MAAIE,QAAQ,GAAG,GAAf;;AACA,MAAI,OAAOF,SAAP,KAAqB,QAAzB,EAAmC;AACjCE,IAAAA,QAAQ,GAAGF,SAAX;AACD,GAFD,MAEO,IAAI,QAAOA,SAAP,MAAqB,QAAzB,EAAmC;AACxCE,IAAAA,QAAQ,GAAGF,SAAS,CAACG,UAArB;AACD;;AACD,SAAOD,QAAQ,KAAK,GAAb,IAAqBH,WAAW,IAAIA,WAAW,CAACK,SAAZ,CAAsB,UAAAC,IAAI;AAAA,WAAIA,IAAI,KAAKH,QAAT,IAAqBG,IAAI,CAACC,EAAL,KAAYJ,QAArC;AAAA,GAA1B,MAA6E,CAAC,CAAzH;AACD;AAED;;;;;;;AAKA,SAASK,OAAT,CAAiBT,KAAjB,EAAwBU,KAAxB,EAA+B;AAC7B,MAAMR,SAAS,GAAGF,KAAK,CAACG,IAAN,CAAWD,SAAX,IAAwB,GAA1C;AACA,MAAIE,QAAQ,GAAGO,SAAf;;AACA,MAAI,QAAOT,SAAP,MAAqB,QAAzB,EAAmC;AACjCE,IAAAA,QAAQ,GAAGF,SAAS,CAACU,IAArB;AACD;;AACD,SAAOV,SAAS,KAAK,GAAd,IAAqBW,UAAU,CAACT,QAAD,EAAWM,KAAX,CAAtC;AACD;AAED;;;;;;;;AAMA,SAASG,UAAT,CAAoBT,QAApB,EAA8BM,KAA9B,EAAqC;AACnC,MAAI,CAACN,QAAL,EAAe;AACb,WAAO,KAAP;AACD,GAFD,MAEO,IAAGU,KAAK,CAACC,OAAN,CAAcX,QAAd,CAAH,EAA4B;AACjC,WAAOM,KAAK,CAACJ,SAAN,CAAgB,UAAAM,IAAI,EAAI;AAC7B,aAAOR,QAAQ,CAACE,SAAT,CAAmB,UAAAC,IAAI;AAAA,eAAIA,IAAI,KAAKK,IAAT,IAAiBL,IAAI,KAAKK,IAAI,CAACJ,EAAnC;AAAA,OAAvB,MAAkE,CAAC,CAA1E;AACD,KAFM,MAEA,CAAC,CAFR;AAGD,GAJM,MAIA;AACL,WAAOE,KAAK,CAACJ,SAAN,CAAgB,UAAAM,IAAI;AAAA,aAAIA,IAAI,KAAKR,QAAT,IAAqBQ,IAAI,CAACJ,EAAL,KAAYJ,QAArC;AAAA,KAApB,MAAuE,CAAC,CAA/E;AACD;AACF;AAED;;;;;;;;AAMA,SAASY,UAAT,CAAoBC,QAApB,EAA8BhB,WAA9B,EAA2CS,KAA3C,EAAkD;AAChDO,EAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAAC,IAAI,EAAI;AACvBA,IAAAA,IAAI,CAAChB,IAAL,CAAUiB,SAAV,GAAsB,CAACrB,aAAa,CAACoB,IAAD,EAAOlB,WAAP,CAAd,IAAqC,CAACQ,OAAO,CAACU,IAAD,EAAOT,KAAP,CAAnE;;AACA,QAAIS,IAAI,CAACE,QAAL,IAAiBF,IAAI,CAACE,QAAL,CAAcC,MAAd,GAAuB,CAA5C,EAA+C;AAC7CN,MAAAA,UAAU,CAACG,IAAI,CAACE,QAAN,EAAgBpB,WAAhB,EAA6BS,KAA7B,CAAV;AACD;AACF,GALD;AAMD;;AAED,SAAQX,aAAR,EAAuBU,OAAvB,EAAgCO,UAAhC","sourcesContent":["/**\n * 判断是否有路由的权限\n * @param route 路由\n * @param permissions 用户权限集合\n * @returns {boolean|*}\n */\nfunction hasPermission(route, permissions) {\n  const authority = route.meta.authority || '*'\n  let required = '*'\n  if (typeof authority === 'string') {\n    required = authority\n  } else if (typeof authority === 'object') {\n    required = authority.permission\n  }\n  return required === '*' || (permissions && permissions.findIndex(item => item === required || item.id === required) !== -1)\n}\n\n/**\n * 判断是否有路由需要的角色\n * @param route 路由\n * @param roles 用户角色集合\n */\nfunction hasRole(route, roles) {\n  const authority = route.meta.authority || '*'\n  let required = undefined\n  if (typeof authority === 'object') {\n    required = authority.role\n  }\n  return authority === '*' || hasAnyRole(required, roles)\n}\n\n/**\n * 判断是否有需要的任意一个角色\n * @param required {String | Array[String]} 需要的角色，可以是单个角色或者一个角色数组\n * @param roles 拥有的角色\n * @returns {boolean}\n */\nfunction hasAnyRole(required, roles) {\n  if (!required) {\n    return false\n  } else if(Array.isArray(required)) {\n    return roles.findIndex(role => {\n      return required.findIndex(item => item === role || item === role.id) !== -1\n    }) !== -1\n  } else {\n    return roles.findIndex(role => role === required || role.id === required) !== -1\n  }\n}\n\n/**\n * 根据权限配置过滤菜单数据\n * @param menuData\n * @param permissions\n * @param roles\n */\nfunction filterMenu(menuData, permissions, roles) {\n  menuData.forEach(menu => {\n    menu.meta.invisible = !hasPermission(menu, permissions) && !hasRole(menu, roles)\n    if (menu.children && menu.children.length > 0) {\n      filterMenu(menu.children, permissions, roles)\n    }\n  })\n}\n\nexport {hasPermission, hasRole, filterMenu}\n"]}]}