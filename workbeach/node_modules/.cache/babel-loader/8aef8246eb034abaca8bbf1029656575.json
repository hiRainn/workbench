{"remainingRequest":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/babel-loader/lib/index.js!/Applications/MAMP/gopath/workbench/workbeach/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Applications/MAMP/gopath/workbench/workbeach/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/gopath/workbench/workbeach/src/components/table/StandardTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/MAMP/gopath/workbench/workbeach/src/components/table/StandardTable.vue","mtime":1598927029001},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL0FwcGxpY2F0aW9ucy9NQU1QL2dvcGF0aC93b3JrYmVuY2gvd29ya2JlYWNoL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTdGFuZGFyZFRhYmxlJywKICBwcm9wczogewogICAgYm9yZGVyZWQ6IEJvb2xlYW4sCiAgICBsb2FkaW5nOiBbQm9vbGVhbiwgT2JqZWN0XSwKICAgIGNvbHVtbnM6IEFycmF5LAogICAgZGF0YVNvdXJjZTogQXJyYXksCiAgICByb3dLZXk6IHsKICAgICAgdHlwZTogW1N0cmluZywgRnVuY3Rpb25dLAogICAgICBkZWZhdWx0OiAna2V5JwogICAgfSwKICAgIHBhZ2luYXRpb246IHsKICAgICAgdHlwZTogW09iamVjdCwgQm9vbGVhbl0sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzZWxlY3RlZFJvd3M6IEFycmF5LAogICAgZXhwYW5kZWRSb3dLZXlzOiBBcnJheSwKICAgIGV4cGFuZGVkUm93UmVuZGVyOiBGdW5jdGlvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5lZWRUb3RhbExpc3Q6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlU2VsZWN0OiBmdW5jdGlvbiB1cGRhdGVTZWxlY3Qoc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpIHsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNlbGVjdGVkUm93cycsIHNlbGVjdGVkUm93cyk7CiAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGVkUm93Q2hhbmdlJywgc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpOwogICAgfSwKICAgIGluaXRUb3RhbExpc3Q6IGZ1bmN0aW9uIGluaXRUb3RhbExpc3QoY29sdW1ucykgewogICAgICB2YXIgdG90YWxMaXN0ID0gY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5uZWVkVG90YWw7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgICAgdG90YWw6IDAKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHJldHVybiB0b3RhbExpc3Q7CiAgICB9LAogICAgb25DbGVhcjogZnVuY3Rpb24gb25DbGVhcigpIHsKICAgICAgdGhpcy51cGRhdGVTZWxlY3QoW10sIFtdKTsKICAgICAgdGhpcy4kZW1pdCgnY2xlYXInKTsKICAgIH0sCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UocGFnaW5hdGlvbiwgZmlsdGVycywgc29ydGVyLCBfcmVmKSB7CiAgICAgIHZhciBjdXJyZW50RGF0YVNvdXJjZSA9IF9yZWYuY3VycmVudERhdGFTb3VyY2U7CiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHBhZ2luYXRpb24sIGZpbHRlcnMsIHNvcnRlciwgewogICAgICAgIGN1cnJlbnREYXRhU291cmNlOiBjdXJyZW50RGF0YVNvdXJjZQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm5lZWRUb3RhbExpc3QgPSB0aGlzLmluaXRUb3RhbExpc3QodGhpcy5jb2x1bW5zKTsKICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY3RlZFJvd3M6IGZ1bmN0aW9uIHNlbGVjdGVkUm93cyhfc2VsZWN0ZWRSb3dzKSB7CiAgICAgIHRoaXMubmVlZFRvdGFsTGlzdCA9IHRoaXMubmVlZFRvdGFsTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgIHRvdGFsOiBfc2VsZWN0ZWRSb3dzLnJlZHVjZShmdW5jdGlvbiAoc3VtLCB2YWwpIHsKICAgICAgICAgICAgcmV0dXJuIHN1bSArIHZhbFtpdGVtLmRhdGFJbmRleF07CiAgICAgICAgICB9LCAwKQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBzZWxlY3RlZFJvd0tleXM6IGZ1bmN0aW9uIHNlbGVjdGVkUm93S2V5cygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkUm93cy5tYXAoZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgIHJldHVybiB0eXBlb2YgX3RoaXMucm93S2V5ID09PSAnZnVuY3Rpb24nID8gX3RoaXMucm93S2V5KHJlY29yZCkgOiByZWNvcmRbX3RoaXMucm93S2V5XTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["StandardTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA,OADA;AAEA,IAAA,OAAA,EAAA,CAAA,OAAA,EAAA,MAAA,CAFA;AAGA,IAAA,OAAA,EAAA,KAHA;AAIA,IAAA,UAAA,EAAA,KAJA;AAKA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,QAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,OAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAFA,KATA;AAaA,IAAA,YAAA,EAAA,KAbA;AAcA,IAAA,eAAA,EAAA,KAdA;AAeA,IAAA,iBAAA,EAAA;AAfA,GAFA;AAmBA,EAAA,IAnBA,kBAmBA;AACA,WAAA;AACA,MAAA,aAAA,EAAA;AADA,KAAA;AAGA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,eADA,EACA,YADA,EACA;AACA,WAAA,KAAA,CAAA,qBAAA,EAAA,YAAA;AACA,WAAA,KAAA,CAAA,mBAAA,EAAA,eAAA,EAAA,YAAA;AACA,KAJA;AAKA,IAAA,aALA,yBAKA,OALA,EAKA;AACA,UAAA,SAAA,GAAA,OAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,SAAA;AAAA,OAAA,EACA,GADA,CACA,UAAA,IAAA,EAAA;AACA,+CACA,IADA;AAEA,UAAA,KAAA,EAAA;AAFA;AAIA,OANA,CAAA;AAOA,aAAA,SAAA;AACA,KAdA;AAeA,IAAA,OAfA,qBAeA;AACA,WAAA,YAAA,CAAA,EAAA,EAAA,EAAA;AACA,WAAA,KAAA,CAAA,OAAA;AACA,KAlBA;AAmBA,IAAA,QAnBA,oBAmBA,UAnBA,EAmBA,OAnBA,EAmBA,MAnBA,QAmBA;AAAA,UAAA,iBAAA,QAAA,iBAAA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,UAAA,EAAA,OAAA,EAAA,MAAA,EAAA;AAAA,QAAA,iBAAA,EAAA;AAAA,OAAA;AACA;AArBA,GAxBA;AA+CA,EAAA,OA/CA,qBA+CA;AACA,SAAA,aAAA,GAAA,KAAA,aAAA,CAAA,KAAA,OAAA,CAAA;AACA,GAjDA;AAkDA,EAAA,KAAA,EAAA;AACA,IAAA,YADA,wBACA,aADA,EACA;AACA,WAAA,aAAA,GAAA,KAAA,aAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,+CACA,IADA;AAEA,UAAA,KAAA,EAAA,aAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA,GAAA,EAAA;AACA,mBAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA;AACA,WAFA,EAEA,CAFA;AAFA;AAMA,OAPA,CAAA;AAQA;AAVA,GAlDA;AA8DA,EAAA,QAAA,EAAA;AACA,IAAA,eADA,6BACA;AAAA;;AACA,aAAA,KAAA,YAAA,CAAA,GAAA,CAAA,UAAA,MAAA,EAAA;AACA,eAAA,OAAA,KAAA,CAAA,MAAA,KAAA,UAAA,GAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,GAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AACA,OAFA,CAAA;AAGA;AALA;AA9DA,CAAA","sourcesContent":["<template>\n  <div class=\"standard-table\">\n    <div class=\"alert\">\n      <a-alert type=\"info\" :show-icon=\"true\" v-if=\"selectedRows\">\n        <div class=\"message\" slot=\"message\">\n          已选择&nbsp;<a>{{selectedRows.length}}</a>&nbsp;项 <a class=\"clear\" @click=\"onClear\">清空</a>\n          <template  v-for=\"(item, index) in needTotalList\" >\n            <div v-if=\"item.needTotal\" :key=\"index\">\n              {{item.title}}总计&nbsp;\n              <a>{{item.customRender ? item.customRender(item.total) : item.total}}</a>\n            </div>\n          </template>\n        </div>\n      </a-alert>\n    </div>\n    <a-table\n      :bordered=\"bordered\"\n      :loading=\"loading\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :rowKey=\"rowKey\"\n      :pagination=\"pagination\"\n      :expandedRowKeys=\"expandedRowKeys\"\n      :expandedRowRender=\"expandedRowRender\"\n      @change=\"onChange\"\n      :rowSelection=\"selectedRows ? {selectedRowKeys: selectedRowKeys, onChange: updateSelect} : undefined\"\n    >\n      <template slot-scope=\"text, record, index\" :slot=\"slot\" v-for=\"slot in Object.keys($scopedSlots).filter(key => key !== 'expandedRowRender') \">\n        <slot :name=\"slot\" v-bind=\"{text, record, index}\"></slot>\n      </template>\n      <template :slot=\"slot\" v-for=\"slot in Object.keys($slots)\">\n        <slot :name=\"slot\"></slot>\n      </template>\n      <template slot-scope=\"record, index, indent, expanded\" :slot=\"$scopedSlots.expandedRowRender ? 'expandedRowRender' : ''\">\n        <slot v-bind=\"{record, index, indent, expanded}\" :name=\"$scopedSlots.expandedRowRender ? 'expandedRowRender' : ''\"></slot>\n      </template>\n    </a-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'StandardTable',\n  props: {\n    bordered: Boolean,\n    loading: [Boolean, Object],\n    columns: Array,\n    dataSource: Array,\n    rowKey: {\n      type: [String, Function],\n      default: 'key'\n    },\n    pagination: {\n      type: [Object, Boolean],\n      default: true\n    },\n    selectedRows: Array,\n    expandedRowKeys: Array,\n    expandedRowRender: Function\n  },\n  data () {\n    return {\n      needTotalList: []\n    }\n  },\n  methods: {\n    updateSelect (selectedRowKeys, selectedRows) {\n      this.$emit('update:selectedRows', selectedRows)\n      this.$emit('selectedRowChange', selectedRowKeys, selectedRows)\n    },\n    initTotalList (columns) {\n      const totalList = columns.filter(item => item.needTotal)\n        .map(item => {\n          return {\n            ...item,\n            total: 0\n          }\n        })\n      return totalList\n    },\n    onClear() {\n      this.updateSelect([], [])\n      this.$emit('clear')\n    },\n    onChange(pagination, filters, sorter, {currentDataSource}) {\n      this.$emit('change', pagination, filters, sorter, {currentDataSource})\n    }\n  },\n  created () {\n    this.needTotalList = this.initTotalList(this.columns)\n  },\n  watch: {\n    selectedRows (selectedRows) {\n      this.needTotalList = this.needTotalList.map(item => {\n        return {\n          ...item,\n          total: selectedRows.reduce((sum, val) => {\n            return sum + val[item.dataIndex]\n          }, 0)\n        }\n      })\n    }\n  },\n  computed: {\n    selectedRowKeys() {\n      return this.selectedRows.map(record => {\n        return (typeof this.rowKey === 'function') ? this.rowKey(record) : record[this.rowKey]\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.standard-table{\n  .alert{\n    margin-bottom: 16px;\n    .message{\n      a{\n        font-weight: 600;\n      }\n    }\n    .clear{\n      float: right;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/table"}]}