{"remainingRequest":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/babel-loader/lib/index.js!/Applications/MAMP/gopath/workbench/workbeach/node_modules/eslint-loader/index.js??ref--13-0!/Applications/MAMP/gopath/workbench/workbeach/src/utils/axios-interceptors.js","dependencies":[{"path":"/Applications/MAMP/gopath/workbench/workbeach/src/utils/axios-interceptors.js","mtime":1598927029046},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/workbench/workbeach/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IENvb2tpZSBmcm9tICdqcy1jb29raWUnOyAvLyA0MDHmi6bmiKoKCnZhciByZXNwNDAxID0gewogIC8qKgogICAqIOWTjeW6lOaVsOaNruS5i+WJjeWBmueCueS7gOS5iAogICAqIEBwYXJhbSByZXNwb25zZSDlk43lupTlr7nosaEKICAgKiBAcGFyYW0gb3B0aW9ucyDlupTnlKjphY3nva4g5YyF5ZCrOiB7cm91dGVyLCBpMThuLCBzdG9yZSwgbWVzc2FnZX0KICAgKiBAcmV0dXJucyB7Kn0KICAgKi8KICBvbkZ1bGZpbGxlZDogZnVuY3Rpb24gb25GdWxmaWxsZWQocmVzcG9uc2UsIG9wdGlvbnMpIHsKICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwoKICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICBtZXNzYWdlLmVycm9yKCfml6DmraTmjqXlj6PmnYPpmZAnKTsKICAgIH0KCiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfSwKCiAgLyoqCiAgICog5ZON5bqU5Ye66ZSZ5pe25omn6KGMCiAgICogQHBhcmFtIGVycm9yIOmUmeivr+WvueixoQogICAqIEBwYXJhbSBvcHRpb25zIOW6lOeUqOmFjee9riDljIXlkKs6IHtyb3V0ZXIsIGkxOG4sIHN0b3JlLCBtZXNzYWdlfQogICAqIEByZXR1cm5zIHtQcm9taXNlPG5ldmVyPn0KICAgKi8KICBvblJlamVjdGVkOiBmdW5jdGlvbiBvblJlamVjdGVkKGVycm9yLCBvcHRpb25zKSB7CiAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTsKICAgIG1lc3NhZ2UuZXJyb3IoZXJyb3IubWVzc2FnZSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KfTsKdmFyIHJlc3A0MDMgPSB7CiAgb25GdWxmaWxsZWQ6IGZ1bmN0aW9uIG9uRnVsZmlsbGVkKHJlc3BvbnNlLCBvcHRpb25zKSB7CiAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTsKCiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHsKICAgICAgbWVzc2FnZS5lcnJvcigiXHU4QkY3XHU2QzQyXHU4OEFCXHU2MkQyXHU3RUREIik7CiAgICB9CgogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KfTsKdmFyIHJlcUNvbW1vbiA9IHsKICAvKioKICAgKiDlj5HpgIHor7fmsYLkuYvliY3lgZrkupvku4DkuYgKICAgKiBAcGFyYW0gY29uZmlnIGF4aW9zIGNvbmZpZwogICAqIEBwYXJhbSBvcHRpb25zIOW6lOeUqOmFjee9riDljIXlkKs6IHtyb3V0ZXIsIGkxOG4sIHN0b3JlLCBtZXNzYWdlfQogICAqIEByZXR1cm5zIHsqfQogICAqLwogIG9uRnVsZmlsbGVkOiBmdW5jdGlvbiBvbkZ1bGZpbGxlZChjb25maWcsIG9wdGlvbnMpIHsKICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwogICAgdmFyIHVybCA9IGNvbmZpZy51cmwsCiAgICAgICAgeHNyZkNvb2tpZU5hbWUgPSBjb25maWcueHNyZkNvb2tpZU5hbWU7CgogICAgaWYgKHVybC5pbmRleE9mKCdsb2dpbicpID09PSAtMSAmJiB4c3JmQ29va2llTmFtZSAmJiAhQ29va2llLmdldCh4c3JmQ29va2llTmFtZSkpIHsKICAgICAgbWVzc2FnZS53YXJuaW5nKCforqTor4EgdG9rZW4g5bey6L+H5pyf77yM6K+36YeN5paw55m75b2VJyk7CiAgICB9CgogICAgcmV0dXJuIGNvbmZpZzsKICB9LAoKICAvKioKICAgKiDor7fmsYLlh7rplJnml7blgZrngrnku4DkuYgKICAgKiBAcGFyYW0gZXJyb3Ig6ZSZ6K+v5a+56LGhCiAgICogQHBhcmFtIG9wdGlvbnMg5bqU55So6YWN572uIOWMheWQqzoge3JvdXRlciwgaTE4biwgc3RvcmUsIG1lc3NhZ2V9CiAgICogQHJldHVybnMge1Byb21pc2U8bmV2ZXI+fQogICAqLwogIG9uUmVqZWN0ZWQ6IGZ1bmN0aW9uIG9uUmVqZWN0ZWQoZXJyb3IsIG9wdGlvbnMpIHsKICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwogICAgbWVzc2FnZS5lcnJvcihlcnJvci5tZXNzYWdlKTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgcmVxdWVzdDogW3JlcUNvbW1vbl0sCiAgLy8g6K+35rGC5oum5oiqCiAgcmVzcG9uc2U6IFtyZXNwNDAxLCByZXNwNDAzXSAvLyDlk43lupTmi6bmiKoKCn07"},{"version":3,"sources":["/Applications/MAMP/gopath/workbench/workbeach/src/utils/axios-interceptors.js"],"names":["Cookie","resp401","onFulfilled","response","options","message","status","error","onRejected","Promise","reject","resp403","reqCommon","config","url","xsrfCookieName","indexOf","get","warning","request"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,WAAnB,C,CACA;;AACA,IAAMC,OAAO,GAAG;AACd;;;;;;AAMAC,EAAAA,WAPc,uBAOFC,QAPE,EAOQC,OAPR,EAOiB;AAAA,QACtBC,OADsB,GACXD,OADW,CACtBC,OADsB;;AAE7B,QAAIF,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3BD,MAAAA,OAAO,CAACE,KAAR,CAAc,QAAd;AACD;;AACD,WAAOJ,QAAP;AACD,GAba;;AAcd;;;;;;AAMAK,EAAAA,UApBc,sBAoBHD,KApBG,EAoBIH,OApBJ,EAoBa;AAAA,QAClBC,OADkB,GACPD,OADO,CAClBC,OADkB;AAEzBA,IAAAA,OAAO,CAACE,KAAR,CAAcA,KAAK,CAACF,OAApB;AACA,WAAOI,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACD;AAxBa,CAAhB;AA2BA,IAAMI,OAAO,GAAG;AACdT,EAAAA,WADc,uBACFC,QADE,EACQC,OADR,EACiB;AAAA,QACtBC,OADsB,GACXD,OADW,CACtBC,OADsB;;AAE7B,QAAIF,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3BD,MAAAA,OAAO,CAACE,KAAR;AACD;;AACD,WAAOJ,QAAP;AACD;AAPa,CAAhB;AAUA,IAAMS,SAAS,GAAG;AAChB;;;;;;AAMAV,EAAAA,WAPgB,uBAOJW,MAPI,EAOIT,OAPJ,EAOa;AAAA,QACpBC,OADoB,GACTD,OADS,CACpBC,OADoB;AAAA,QAEpBS,GAFoB,GAEGD,MAFH,CAEpBC,GAFoB;AAAA,QAEfC,cAFe,GAEGF,MAFH,CAEfE,cAFe;;AAG3B,QAAID,GAAG,CAACE,OAAJ,CAAY,OAAZ,MAAyB,CAAC,CAA1B,IAA+BD,cAA/B,IAAiD,CAACf,MAAM,CAACiB,GAAP,CAAWF,cAAX,CAAtD,EAAkF;AAChFV,MAAAA,OAAO,CAACa,OAAR,CAAgB,oBAAhB;AACD;;AACD,WAAOL,MAAP;AACD,GAde;;AAehB;;;;;;AAMAL,EAAAA,UArBgB,sBAqBLD,KArBK,EAqBEH,OArBF,EAqBW;AAAA,QAClBC,OADkB,GACPD,OADO,CAClBC,OADkB;AAEzBA,IAAAA,OAAO,CAACE,KAAR,CAAcA,KAAK,CAACF,OAApB;AACA,WAAOI,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACD;AAzBe,CAAlB;AA4BA,eAAe;AACbY,EAAAA,OAAO,EAAE,CAACP,SAAD,CADI;AACS;AACtBT,EAAAA,QAAQ,EAAE,CAACF,OAAD,EAAUU,OAAV,CAFG,CAEgB;;AAFhB,CAAf","sourcesContent":["import Cookie from 'js-cookie'\n// 401拦截\nconst resp401 = {\n  /**\n   * 响应数据之前做点什么\n   * @param response 响应对象\n   * @param options 应用配置 包含: {router, i18n, store, message}\n   * @returns {*}\n   */\n  onFulfilled(response, options) {\n    const {message} = options\n    if (response.status === 401) {\n      message.error('无此接口权限')\n    }\n    return response\n  },\n  /**\n   * 响应出错时执行\n   * @param error 错误对象\n   * @param options 应用配置 包含: {router, i18n, store, message}\n   * @returns {Promise<never>}\n   */\n  onRejected(error, options) {\n    const {message} = options\n    message.error(error.message)\n    return Promise.reject(error)\n  }\n}\n\nconst resp403 = {\n  onFulfilled(response, options) {\n    const {message} = options\n    if (response.status === 403) {\n      message.error(`请求被拒绝`)\n    }\n    return response\n  }\n}\n\nconst reqCommon = {\n  /**\n   * 发送请求之前做些什么\n   * @param config axios config\n   * @param options 应用配置 包含: {router, i18n, store, message}\n   * @returns {*}\n   */\n  onFulfilled(config, options) {\n    const {message} = options\n    const {url, xsrfCookieName} = config\n    if (url.indexOf('login') === -1 && xsrfCookieName && !Cookie.get(xsrfCookieName)) {\n      message.warning('认证 token 已过期，请重新登录')\n    }\n    return config\n  },\n  /**\n   * 请求出错时做点什么\n   * @param error 错误对象\n   * @param options 应用配置 包含: {router, i18n, store, message}\n   * @returns {Promise<never>}\n   */\n  onRejected(error, options) {\n    const {message} = options\n    message.error(error.message)\n    return Promise.reject(error)\n  }\n}\n\nexport default {\n  request: [reqCommon], // 请求拦截\n  response: [resp401, resp403] // 响应拦截\n}\n"]}]}