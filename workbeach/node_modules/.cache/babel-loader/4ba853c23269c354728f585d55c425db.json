{"remainingRequest":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/babel-loader/lib/index.js!/Applications/MAMP/gopath/vue-antd-admin/node_modules/eslint-loader/index.js??ref--13-0!/Applications/MAMP/gopath/vue-antd-admin/src/plugins/authority-plugin.js","dependencies":[{"path":"/Applications/MAMP/gopath/vue-antd-admin/src/plugins/authority-plugin.js","mtime":1598927029038},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/MAMP/gopath/vue-antd-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL0FwcGxpY2F0aW9ucy9NQU1QL2dvcGF0aC92dWUtYW50ZC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CgovKioKICog6I635Y+W6Lev55Sx6ZyA6KaB55qE5p2D6ZmQCiAqIEBwYXJhbSBwZXJtaXNzaW9ucwogKiBAcGFyYW0gcm91dGUKICogQHJldHVybnMge1Blcm1pc3Npb259CiAqLwp2YXIgZ2V0Um91dGVQZXJtaXNzaW9uID0gZnVuY3Rpb24gZ2V0Um91dGVQZXJtaXNzaW9uKHBlcm1pc3Npb25zLCByb3V0ZSkgewogIHJldHVybiBwZXJtaXNzaW9ucy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5pZCA9PT0gcm91dGUubWV0YS5hdXRob3JpdHkucGVybWlzc2lvbjsKICB9KTsKfTsKLyoqCiAqIOiOt+WPlui3r+eUsemcgOimgeeahOinkuiJsgogKiBAcGFyYW0gcm9sZXMKICogQHBhcmFtIHJvdXRlCiAqIEByZXR1cm5zIHtBcnJheVtSb2xlXX0KICovCgoKdmFyIGdldFJvdXRlUm9sZSA9IGZ1bmN0aW9uIGdldFJvdXRlUm9sZShyb2xlcywgcm91dGUpIHsKICB2YXIgcmVxdWlyZWRSb2xlcyA9IHJvdXRlLm1ldGEuYXV0aG9yaXR5LnJvbGU7CiAgcmV0dXJuIHJlcXVpcmVkUm9sZXMgPyByb2xlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiByZXF1aXJlZFJvbGVzLmZpbmRJbmRleChmdW5jdGlvbiAocmVxdWlyZWQpIHsKICAgICAgcmV0dXJuIHJlcXVpcmVkID09PSBpdGVtLmlkOwogICAgfSkgIT09IC0xOwogIH0pIDogW107Cn07Ci8qKgogKiDliKTmlq3mmK/lkKblt7LkuLrmlrnms5Xms6jlhaXmnYPpmZDorqTor4EKICogQHBhcmFtIG1ldGhvZAogKiBAcmV0dXJucyB7Ym9vbGVhbn0KICovCgoKdmFyIGhhc0luamVjdGVkID0gZnVuY3Rpb24gaGFzSW5qZWN0ZWQobWV0aG9kKSB7CiAgcmV0dXJuIG1ldGhvZC50b1N0cmluZygpLmluZGV4T2YoJy8vLS1hdXRoLWluamVjdCcpICE9PSAtMTsKfTsKLyoqCiAqIOaTjeS9nOadg+mZkOagoemqjAogKiBAcGFyYW0gYXV0aENvbmZpZwogKiBAcGFyYW0gcGVybWlzc2lvbgogKiBAcGFyYW0gcm9sZQogKiBAcGFyYW0gcGVybWlzc2lvbnMKICogQHBhcmFtIHJvbGVzCiAqIEByZXR1cm5zIHtib29sZWFufQogKi8KCgp2YXIgYXV0aCA9IGZ1bmN0aW9uIGF1dGgoYXV0aENvbmZpZywgcGVybWlzc2lvbiwgcm9sZSwgcGVybWlzc2lvbnMsIHJvbGVzKSB7CiAgdmFyIGNoZWNrID0gYXV0aENvbmZpZy5jaGVjaywKICAgICAgdHlwZSA9IGF1dGhDb25maWcudHlwZTsKCiAgaWYgKGNoZWNrICYmIHR5cGVvZiBjaGVjayA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIGNoZWNrLmFwcGx5KHRoaXMsIFtwZXJtaXNzaW9uLCByb2xlLCBwZXJtaXNzaW9ucywgcm9sZXNdKTsKICB9CgogIGlmICh0eXBlID09PSAncGVybWlzc2lvbicpIHsKICAgIHJldHVybiBjaGVja0Zyb21QZXJtaXNzaW9uKGNoZWNrLCBwZXJtaXNzaW9uKTsKICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyb2xlJykgewogICAgcmV0dXJuIGNoZWNrRnJvbVJvbGVzKGNoZWNrLCByb2xlKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGNoZWNrRnJvbVBlcm1pc3Npb24oY2hlY2ssIHBlcm1pc3Npb24pIHx8IGNoZWNrRnJvbVJvbGVzKGNoZWNrLCByb2xlKTsKICB9Cn07Ci8qKgogKiDmo4Dmn6XmnYPpmZDmmK/lkKbmnInmk43kvZzmnYPpmZAKICogQHBhcmFtIGNoZWNrIOmcgOimgeajgOafpeeahOaTjeS9nOadg+mZkAogKiBAcGFyYW0gcGVybWlzc2lvbiDmnYPpmZAKICogQHJldHVybnMge2Jvb2xlYW59CiAqLwoKCnZhciBjaGVja0Zyb21QZXJtaXNzaW9uID0gZnVuY3Rpb24gY2hlY2tGcm9tUGVybWlzc2lvbihjaGVjaywgcGVybWlzc2lvbikgewogIHJldHVybiBwZXJtaXNzaW9uICYmIHBlcm1pc3Npb24ub3BlcmF0aW9uICYmIHBlcm1pc3Npb24ub3BlcmF0aW9uLmluZGV4T2YoY2hlY2spICE9PSAtMTsKfTsKLyoqCiAqIOajgOafpSByb2xlcyDmmK/lkKbmnInmk43kvZzmnYPpmZAKICogQHBhcmFtIGNoZWNrIOmcgOimgeajgOafpeeahOaTjeS9nOadg+mZkAogKiBAcGFyYW0gcm9sZXMg6KeS6Imy5pWw57uECiAqIEByZXR1cm5zIHtib29sZWFufQogKi8KCgp2YXIgY2hlY2tGcm9tUm9sZXMgPSBmdW5jdGlvbiBjaGVja0Zyb21Sb2xlcyhjaGVjaywgcm9sZXMpIHsKICBpZiAoIXJvbGVzKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocm9sZXMpLAogICAgICBfc3RlcDsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciByb2xlID0gX3N0ZXAudmFsdWU7CiAgICAgIHZhciBvcGVyYXRpb24gPSByb2xlLm9wZXJhdGlvbjsKCiAgICAgIGlmIChvcGVyYXRpb24gJiYgb3BlcmF0aW9uLmluZGV4T2YoY2hlY2spICE9PSAtMSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IuZigpOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9OwoKdmFyIGNoZWNrSW5qZWN0ID0gZnVuY3Rpb24gY2hlY2tJbmplY3QoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgdmFyIHR5cGUgPSBiaW5kaW5nLmFyZzsKICB2YXIgY2hlY2sgPSBiaW5kaW5nLnZhbHVlOwogIHZhciBpbnN0YW5jZSA9IHZub2RlLmNvbnRleHQ7CiAgdmFyICRhdXRoID0gaW5zdGFuY2UuJGF1dGg7CgogIGlmICghJGF1dGggfHwgISRhdXRoKGNoZWNrLCB0eXBlKSkgewogICAgYWRkRGlzYWJsZWQoZWwpOwogIH0gZWxzZSB7CiAgICByZW1vdmVEaXNhYmxlZChlbCk7CiAgfQp9OwoKdmFyIGFkZERpc2FibGVkID0gZnVuY3Rpb24gYWRkRGlzYWJsZWQoZWwpIHsKICBpZiAoZWwudGFnTmFtZSA9PT0gJ0JVVFRPTicpIHsKICAgIGVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTsKICB9IGVsc2UgewogICAgZWwuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsKICB9CgogIGVsLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAn5peg5q2k5p2D6ZmQJyk7Cn07Cgp2YXIgcmVtb3ZlRGlzYWJsZWQgPSBmdW5jdGlvbiByZW1vdmVEaXNhYmxlZChlbCkgewogIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7CiAgZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpOwogIGVsLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTsKfTsKCnZhciBBdXRob3JpdHlQbHVnaW4gPSB7CiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUpIHsKICAgIFZ1ZS5kaXJlY3RpdmUoJ2F1dGgnLCB7CiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICAgICAgY2hlY2tJbmplY3QoZWwsIGJpbmRpbmcsIHZub2RlKTsKICAgICAgfSwKICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICAgICAgY2hlY2tJbmplY3QoZWwsIGJpbmRpbmcsIHZub2RlKTsKICAgICAgfSwKICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoZWwpIHsKICAgICAgICByZW1vdmVEaXNhYmxlZChlbCk7CiAgICAgIH0KICAgIH0pOwogICAgVnVlLm1peGluKHsKICAgICAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgaWYgKHRoaXMuJG9wdGlvbnMuYXV0aG9yaXplKSB7CiAgICAgICAgICB2YXIgYXV0aG9yaXplID0gdGhpcy4kb3B0aW9ucy5hdXRob3JpemU7CiAgICAgICAgICBPYmplY3Qua2V5cyhhdXRob3JpemUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICBpZiAoX3RoaXMuJG9wdGlvbnMubWV0aG9kc1trZXldKSB7CiAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9IF90aGlzLiRvcHRpb25zLm1ldGhvZHNba2V5XTsKCiAgICAgICAgICAgICAgaWYgKCFoYXNJbmplY3RlZChtZXRob2QpKSB7CiAgICAgICAgICAgICAgICB2YXIgYXV0aENvbmZpZyA9IGF1dGhvcml6ZVtrZXldOwogICAgICAgICAgICAgICAgYXV0aENvbmZpZyA9IHR5cGVvZiBhdXRoQ29uZmlnID09PSAnc3RyaW5nJyA/IHsKICAgICAgICAgICAgICAgICAgY2hlY2s6IGF1dGhDb25maWcKICAgICAgICAgICAgICAgIH0gOiBhdXRoQ29uZmlnOwogICAgICAgICAgICAgICAgdmFyIF9hdXRoQ29uZmlnID0gYXV0aENvbmZpZywKICAgICAgICAgICAgICAgICAgICBjaGVjayA9IF9hdXRoQ29uZmlnLmNoZWNrLAogICAgICAgICAgICAgICAgICAgIHR5cGUgPSBfYXV0aENvbmZpZy50eXBlLAogICAgICAgICAgICAgICAgICAgIG9uRmFpbHVyZSA9IF9hdXRoQ29uZmlnLm9uRmFpbHVyZTsKCiAgICAgICAgICAgICAgICBfdGhpcy4kb3B0aW9ucy5tZXRob2RzW2tleV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIC8vLS1hdXRoLWluamVjdAogICAgICAgICAgICAgICAgICBpZiAodGhpcy4kYXV0aChjaGVjaywgdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9uRmFpbHVyZSAmJiB0eXBlb2Ygb25GYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzWyIkIi5jb25jYXQoY2hlY2ssICJGYWlsdXJlIildID0gb25GYWlsdXJlOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbIiQiLmNvbmNhdChjaGVjaywgIkZhaWx1cmUiKV0oY2hlY2spOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJcdTVCRjlcdTRFMERcdThENzdcdUZGMENcdTYwQThcdTZDQTFcdTY3MDlcdTY0Q0RcdTRGNUNcdTY3NDNcdTk2NTBcdUZGMUEiLmNvbmNhdChjaGVjaykpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1ldGhvZHM6IHsKICAgICAgICAvKioKICAgICAgICAgKiDmk43kvZzmnYPpmZDmoKHpqowKICAgICAgICAgKiBAcGFyYW0gY2hlY2sg6ZyA6KaB5qCh6aqM55qE5pON5L2c5ZCNCiAgICAgICAgICogQHBhcmFtIHR5cGUg5qCh6aqM57G75Z6L77yM6YCa6L+HIHBlcm1pc3Npb24g5qCh6aqM77yM6L+Y5piv6YCa6L+HIHJvbGUg5qCh6aqM44CCCiAgICAgICAgICog5aaC5pyq6K6+572u77yM5YiZ6Ieq5Yqo6K+G5Yir77yM5aaC5Yy56YWN5Yiw5b2T5YmN6Lev55SxIHBlcm1pc3Npb24g5YiZIHR5cGUgPSBwZXJtaXNzaW9u77yM5ZCm5YiZIHR5cGUgPSByb2xlCiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IOaYr+WQpuagoemqjOmAmui/hwogICAgICAgICAqLwogICAgICAgICRhdXRoOiBmdW5jdGlvbiAkYXV0aChjaGVjaywgdHlwZSkgewogICAgICAgICAgdmFyIHBlcm1pc3Npb25zID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snYWNjb3VudC9wZXJtaXNzaW9ucyddOwogICAgICAgICAgdmFyIHJvbGVzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snYWNjb3VudC9yb2xlcyddOwogICAgICAgICAgdmFyIHBlcm1pc3Npb24gPSBnZXRSb3V0ZVBlcm1pc3Npb24ocGVybWlzc2lvbnMsIHRoaXMuJHJvdXRlKTsKICAgICAgICAgIHZhciByb2xlID0gZ2V0Um91dGVSb2xlKHJvbGVzLCB0aGlzLiRyb3V0ZSk7CiAgICAgICAgICByZXR1cm4gYXV0aC5hcHBseSh0aGlzLCBbewogICAgICAgICAgICBjaGVjazogY2hlY2ssCiAgICAgICAgICAgIHR5cGU6IHR5cGUKICAgICAgICAgIH0sIHBlcm1pc3Npb24sIHJvbGUsIHBlcm1pc3Npb25zLCByb2xlc10pOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBBdXRob3JpdHlQbHVnaW47"},{"version":3,"sources":["/Applications/MAMP/gopath/vue-antd-admin/src/plugins/authority-plugin.js"],"names":["getRoutePermission","permissions","route","find","item","id","meta","authority","permission","getRouteRole","roles","requiredRoles","role","filter","findIndex","required","hasInjected","method","toString","indexOf","auth","authConfig","check","type","apply","checkFromPermission","checkFromRoles","operation","checkInject","el","binding","vnode","arg","value","instance","context","$auth","addDisabled","removeDisabled","tagName","setAttribute","classList","add","remove","removeAttribute","AuthorityPlugin","install","Vue","directive","bind","update","unbind","mixin","beforeCreate","$options","authorize","Object","keys","forEach","key","methods","onFailure","arguments","$message","error","$store","getters","$route"],"mappings":"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","sourcesContent":["/**\n * 获取路由需要的权限\n * @param permissions\n * @param route\n * @returns {Permission}\n */\nconst getRoutePermission = (permissions, route) => permissions.find(item => item.id === route.meta.authority.permission)\n/**\n * 获取路由需要的角色\n * @param roles\n * @param route\n * @returns {Array[Role]}\n */\nconst getRouteRole = (roles, route) => {\n  const requiredRoles = route.meta.authority.role\n  return requiredRoles ? roles.filter(item => requiredRoles.findIndex(required => required === item.id) !== -1) : []\n}\n/**\n * 判断是否已为方法注入权限认证\n * @param method\n * @returns {boolean}\n */\nconst hasInjected = (method) => method.toString().indexOf('//--auth-inject') !== -1\n\n/**\n * 操作权限校验\n * @param authConfig\n * @param permission\n * @param role\n * @param permissions\n * @param roles\n * @returns {boolean}\n */\nconst auth = function(authConfig, permission, role, permissions, roles) {\n  const {check, type} = authConfig\n  if (check && typeof check === 'function') {\n    return check.apply(this, [permission, role, permissions, roles])\n  }\n  if (type === 'permission') {\n    return checkFromPermission(check, permission)\n  } else if (type === 'role') {\n    return checkFromRoles(check, role)\n  } else {\n    return checkFromPermission(check, permission) || checkFromRoles(check, role)\n  }\n}\n\n/**\n * 检查权限是否有操作权限\n * @param check 需要检查的操作权限\n * @param permission 权限\n * @returns {boolean}\n */\nconst checkFromPermission = function(check, permission) {\n  return permission && permission.operation && permission.operation.indexOf(check) !== -1\n}\n\n/**\n * 检查 roles 是否有操作权限\n * @param check 需要检查的操作权限\n * @param roles 角色数组\n * @returns {boolean}\n */\nconst checkFromRoles = function(check, roles) {\n  if (!roles) {\n    return false\n  }\n  for (let role of roles) {\n    const {operation} = role\n    if (operation && operation.indexOf(check) !== -1) {\n      return true\n    }\n  }\n  return false\n}\n\nconst checkInject = function (el, binding,vnode) {\n  const type = binding.arg\n  const check = binding.value\n  const instance = vnode.context\n  const $auth = instance.$auth\n  if (!$auth || !$auth(check, type)) {\n    addDisabled(el)\n  } else {\n    removeDisabled(el)\n  }\n}\n\nconst addDisabled = function (el) {\n  if (el.tagName === 'BUTTON') {\n    el.setAttribute('disabled', 'disabled')\n  } else {\n    el.classList.add('disabled')\n  }\n  el.setAttribute('title', '无此权限')\n}\n\nconst removeDisabled = function (el) {\n  el.classList.remove('disabled')\n  el.removeAttribute('disabled')\n  el.removeAttribute('title')\n}\n\nconst AuthorityPlugin = {\n  install(Vue) {\n    Vue.directive('auth', {\n      bind(el, binding,vnode) {\n        checkInject(el, binding, vnode)\n      },\n      update(el, binding,vnode) {\n        checkInject(el, binding, vnode)\n      },\n      unbind(el) {\n        removeDisabled(el)\n      }\n    })\n    Vue.mixin({\n      beforeCreate() {\n        if (this.$options.authorize) {\n          const authorize = this.$options.authorize\n          Object.keys(authorize).forEach(key => {\n            if (this.$options.methods[key]) {\n              const method = this.$options.methods[key]\n              if (!hasInjected(method)) {\n                let authConfig = authorize[key]\n                authConfig = (typeof authConfig === 'string') ? {check: authConfig} : authConfig\n                const {check, type, onFailure} = authConfig\n                this.$options.methods[key] = function () {\n                  //--auth-inject\n                  if (this.$auth(check, type)) {\n                    return method.apply(this, arguments)\n                  } else {\n                    if (onFailure && typeof onFailure === 'function') {\n                      this[`$${check}Failure`] = onFailure\n                      return this[`$${check}Failure`](check)\n                    } else {\n                      this.$message.error(`对不起，您没有操作权限：${check}`)\n                    }\n                    return 0\n                  }\n                }\n              }\n            }\n          })\n        }\n      },\n      methods: {\n        /**\n         * 操作权限校验\n         * @param check 需要校验的操作名\n         * @param type 校验类型，通过 permission 校验，还是通过 role 校验。\n         * 如未设置，则自动识别，如匹配到当前路由 permission 则 type = permission，否则 type = role\n         * @returns {boolean} 是否校验通过\n         */\n        $auth(check, type) {\n          const permissions = this.$store.getters['account/permissions']\n          const roles = this.$store.getters['account/roles']\n          const permission = getRoutePermission(permissions, this.$route)\n          const role = getRouteRole(roles, this.$route)\n          return auth.apply(this, [{check, type}, permission, role, permissions, roles])\n        }\n      }\n    })\n  }\n}\n\nexport default AuthorityPlugin\n"]}]}